{
  if (featureSource instanceof VersioningFeatureLocking) {
    return new GeoServerVersioningFeatureLocking((VersioningFeatureLocking)featureSource,schema,definitionQuery,declaredCRS,srsHandling);
  }
 else   if (featureSource instanceof VersioningFeatureStore) {
    return new GeoServerVersioningFeatureStore((VersioningFeatureStore)featureSource,schema,definitionQuery,declaredCRS,srsHandling);
  }
  return new GeoServerVersioningFeatureSource(featureSource,schema,definitionQuery,declaredCRS,srsHandling);
}
