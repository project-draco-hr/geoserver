{
  GWCConfig configDefaults=GWCConfig.getOldDefaults();
  mockMediator=mock(GWC.class);
  when(mockMediator.getConfig()).thenReturn(configDefaults);
  GridSetBroker gridsets=new GridSetBroker(true,true);
  when(mockMediator.getGridSetBroker()).thenReturn(gridsets);
  mockLayerInfo=mock(LayerInfo.class);
  MetadataMap layerMetadata=new MetadataMap();
  when(mockLayerInfo.getMetadata()).thenReturn(layerMetadata);
  mockLayerGroupInfo=mock(LayerGroupInfo.class);
  MetadataMap groupMetadata=new MetadataMap();
  when(mockLayerGroupInfo.getMetadata()).thenReturn(groupMetadata);
  mockResourceInfo=mock(FeatureTypeInfo.class);
  mockNamespaceInfo=mock(NamespaceInfo.class);
  mockDefaultStyle=mock(StyleInfo.class);
  when(mockDefaultStyle.prefixedName()).thenReturn("defaultStyle");
  when(mockLayerGroupInfo.getName()).thenReturn(LAYER_GROUP_NAME);
  when(mockLayerGroupInfo.prefixedName()).thenReturn(LAYER_GROUP_NAME);
  when(mockLayerGroupInfo.getLayers()).thenReturn(Arrays.asList((PublishedInfo)mockLayerInfo));
  when(mockLayerGroupInfo.getStyles()).thenReturn(Arrays.asList((StyleInfo)null));
  when(mockResourceInfo.prefixedName()).thenReturn(PREFIXED_RESOURCE_NAME);
  when(mockResourceInfo.getName()).thenReturn(RESOURCE_NAME);
  when(mockResourceInfo.getNamespace()).thenReturn(mockNamespaceInfo);
  when(mockNamespaceInfo.getPrefix()).thenReturn(NAMESPACE_PREFIX);
  when(mockLayerInfo.getResource()).thenReturn(mockResourceInfo);
  Catalog mockCatalog=mock(Catalog.class);
  when(mockCatalog.getLayerGroups()).thenReturn(Arrays.asList(mockLayerGroupInfo));
  when(mockLayerInfo.getDefaultStyle()).thenReturn(mockDefaultStyle);
  listener=new CatalogLayerEventListener(mockMediator,mockCatalog);
}
