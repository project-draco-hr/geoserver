{
  UserListProvider provider=new UserListProvider();
  add(users=new GeoServerTablePanel<User>("table",provider,true){
    @SuppressWarnings("rawtypes") @Override protected Component getComponentForProperty(    String id,    IModel itemModel,    Property<User> property){
      if (property == UserListProvider.USERNAME) {
        return editUserLink(id,itemModel,property);
      }
 else       if (property == UserListProvider.ROLES) {
        return new Label(id,property.getModel(itemModel));
      }
 else       if (property == UserListProvider.ADMIN) {
        User user=(User)itemModel.getObject();
        Boolean isAdmin=(Boolean)property.getPropertyValue(user);
        if (Boolean.TRUE.equals(isAdmin)) {
          return new Icon(id,CatalogIconFactory.ENABLED_ICON);
        }
 else {
          return new Label(id,"");
        }
      }
      throw new RuntimeException("Uknown property " + property);
    }
    @Override protected void onSelectionUpdate(    AjaxRequestTarget target){
      removal.setEnabled(users.getSelection().size() > 0);
      target.addComponent(removal);
    }
  }
);
  users.setOutputMarkupId(true);
  add(dialog=new GeoServerDialog("dialog"));
  setHeaderPanel(headerPanel());
}
