{
  Properties db=new Properties();
  if (dbprops == null) {
    dbprops=monitoringDir.get("db.properties");
    InputStream in=getClass().getResourceAsStream("db.properties");
    IOUtils.copy(in,dbprops.out());
    db.load(getClass().getResourceAsStream("db.properties"));
  }
 else {
    InputStream in=dbprops.in();
    db.load(in);
    in.close();
  }
  logDbProperties(db);
  setDriverClassName(db.getProperty("driver"));
  setUrl(getURL(db));
  if (db.containsKey("username")) {
    setUsername(db.getProperty("username"));
  }
  if (db.containsKey("password")) {
    setPassword(db.getProperty("password"));
  }
  setDefaultAutoCommit(Boolean.valueOf(db.getProperty("defaultAutoCommit","true")));
  setMinIdle(1);
  setMaxActive(4);
  super.getConnection();
}
