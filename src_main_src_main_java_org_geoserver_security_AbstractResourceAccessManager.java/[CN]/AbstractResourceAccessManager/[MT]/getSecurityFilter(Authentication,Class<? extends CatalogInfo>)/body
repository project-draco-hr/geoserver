{
  org.opengis.filter.expression.Function visible=new InternalVolatileFunction(){
    @Override public Boolean evaluate(    Object object){
      CatalogInfo info=(CatalogInfo)object;
      if (info instanceof NamespaceInfo) {
        info=getCatalog().getWorkspaceByName(((NamespaceInfo)info).getPrefix());
      }
      String name=(String)OwsUtils.property(info,"name",String.class);
      WrapperPolicy policy=getSecurityWrapper().buildWrapperPolicy(AbstractResourceAccessManager.this,user,info);
      AccessLevel accessLevel=policy.getAccessLevel();
      boolean visible=!AccessLevel.HIDDEN.equals(accessLevel);
      return Boolean.valueOf(visible);
    }
  }
;
  FilterFactory factory=Predicates.factory;
  Filter filter=factory.equals(factory.literal(Boolean.TRUE),visible);
  return filter;
}
