{
  if (!Arrays.asList(source.getTypeNames()).contains(query.getTypeName())) {
    throw new IllegalArgumentException(query.getTypeName() + " is not one of the FeatureTypes contained by the Datasource.  Options are: " + Arrays.asList(source.getTypeNames()));
  }
  FeatureSource<SimpleFeatureType,SimpleFeature> featureSource=source.getFeatureSource(query.getTypeName());
  GTVectorLayer layer=new GTVectorLayer();
  layer.create(featureSource,query);
  return layer;
}
