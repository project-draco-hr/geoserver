{
  return new AjaxSubmitLink("save",paramsForm){
    @Override protected void onError(    AjaxRequestTarget target,    Form<?> paramsForm){
      super.onError(target,paramsForm);
      target.addComponent(paramsForm);
    }
    @Override protected void onSubmit(    AjaxRequestTarget target,    Form<?> paramsForm){
      WmsEoCreateGroupModel model=(WmsEoCreateGroupModel)paramsForm.getModelObject();
      EoCatalogBuilder builder=new EoCatalogBuilder(getCatalog());
      try {
        LayerGroupInfo eoGroup=builder.createEoLayerGroup(model.getWorkspace(),model.getName(),model.getBrowseImageUrl(),model.getBandsUrl(),model.getMasksUrl(),model.getParametersUrl());
        Map<String,String> parameters=new HashMap<String,String>();
        parameters.put(LayerGroupEditPage.WORKSPACE,model.getWorkspace().getName());
        parameters.put(LayerGroupEditPage.GROUP,eoGroup.getName());
        setResponsePage(new LayerGroupEditPage(new PageParameters(parameters)));
      }
 catch (      RuntimeException e) {
        if (LOGGER.isLoggable(Level.INFO)) {
          LOGGER.log(Level.INFO,e.getMessage(),e);
        }
        paramsForm.error(e.getMessage());
        target.addComponent(paramsForm);
      }
catch (      Exception e) {
        if (LOGGER.isLoggable(Level.INFO)) {
          LOGGER.log(Level.INFO,e.getMessage(),e);
        }
        paramsForm.error(e.getMessage());
        target.addComponent(paramsForm);
      }
    }
  }
;
}
