{
  this.finder=finder;
  requestRoot=request.getDocumentRoot();
  this.useCachedEnvValues=cacheEnvValues;
  currentDate=null;
  currentTime=null;
  currentDateTime=null;
  subjectMap=new HashMap<URI,Map<String,Set<Attribute>>>();
  setupSubjects(request.getSubjects());
  resourceMap=new HashMap<String,Set<Attribute>>();
  setupResource(request.getResource());
  actionMap=new HashMap<String,Set<Attribute>>();
  mapAttributes(request.getAction(),actionMap);
  environmentMap=new HashMap<String,Set<Attribute>>();
  mapAttributes(request.getEnvironmentAttributes(),environmentMap);
}
