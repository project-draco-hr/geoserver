{
synchronized (styleCache) {
    File styleFile=GeoserverDataDirectory.findStyleFile(style.getFilename(),true);
    BufferedOutputStream out=new BufferedOutputStream(new FileOutputStream(styleFile));
    try {
      IOUtils.copy(in,out);
      out.flush();
      clear(style);
    }
  finally {
      out.close();
    }
  }
}
