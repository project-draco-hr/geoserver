{
synchronized (styleCache) {
    File styleFile=GeoserverDataDirectory.findStyleFile(info.getFilename(),true);
    BufferedOutputStream out=new BufferedOutputStream(new FileOutputStream(styleFile));
    try {
      Styles.encode(Styles.sld(style),info.getSLDVersion(),format,out);
      clear(info);
    }
  finally {
      out.close();
    }
  }
}
