{
  String colorMap=getParameters().get(0).evaluate(feature,String.class);
  double min=getParameters().get(1).evaluate(feature,Double.class).doubleValue();
  double max=getParameters().get(2).evaluate(feature,Double.class).doubleValue();
  String beforeColor=null;
  String afterColor=null;
  int expressionCount=getParameters().size();
  if (expressionCount >= 4) {
    beforeColor=getParameters().get(3).evaluate(feature,String.class);
  }
  if (expressionCount >= 5) {
    afterColor=getParameters().get(4).evaluate(feature,String.class);
  }
  return evaluate(colorMap,min,max,beforeColor,afterColor);
}
