{
  final WMSInfo service=getGeoServer().getService(WMSInfo.class);
  service.setTitle("test title");
  service.setAbstract("test abstract");
  service.setAccessConstraints("test accessConstraints");
  service.setFees("test fees");
  service.getKeywords().clear();
  service.getKeywords().add(new Keyword("test keyword 1"));
  service.getKeywords().add(new Keyword("test keyword 2"));
  service.setMaintainer("test maintainer");
  service.setOnlineResource("http://example.com/geoserver");
  GeoServerInfo global=getGeoServer().getGlobal();
  ContactInfo contact=global.getContact();
  contact.setAddress("__address");
  contact.setAddressCity("__city");
  contact.setAddressCountry("__country");
  contact.setAddressPostalCode("__ZIP");
  contact.setAddressState("__state");
  contact.setAddressType("__type");
  contact.setContactEmail("e@mail");
  contact.setContactOrganization("__org");
  contact.setContactFacsimile("__fax");
  contact.setContactPerson("__me");
  contact.setContactPosition("__position");
  contact.setContactVoice("__phone");
  getGeoServer().save(global);
  getGeoServer().save(service);
  Document doc=getAsDOM("wms?service=WMS&request=getCapabilities&version=1.1.1",true);
  String base="WMT_MS_Capabilities/Service/";
  assertXpathEvaluatesTo("OGC:WMS",base + "Name",doc);
  assertXpathEvaluatesTo("test title",base + "Title",doc);
  assertXpathEvaluatesTo("test abstract",base + "Abstract",doc);
  assertXpathEvaluatesTo("test keyword 1",base + "KeywordList/Keyword[1]",doc);
  assertXpathEvaluatesTo("test keyword 2",base + "KeywordList/Keyword[2]",doc);
  assertXpathEvaluatesTo("http://example.com/geoserver",base + "OnlineResource/@xlink:href",doc);
  String cinfo=base + "ContactInformation/";
  assertXpathEvaluatesTo("__me",cinfo + "ContactPersonPrimary/ContactPerson",doc);
  assertXpathEvaluatesTo("__org",cinfo + "ContactPersonPrimary/ContactOrganization",doc);
  assertXpathEvaluatesTo("__position",cinfo + "ContactPosition",doc);
  assertXpathEvaluatesTo("__type",cinfo + "ContactAddress/AddressType",doc);
  assertXpathEvaluatesTo("__address",cinfo + "ContactAddress/Address",doc);
  assertXpathEvaluatesTo("__city",cinfo + "ContactAddress/City",doc);
  assertXpathEvaluatesTo("__state",cinfo + "ContactAddress/StateOrProvince",doc);
  assertXpathEvaluatesTo("__ZIP",cinfo + "ContactAddress/PostCode",doc);
  assertXpathEvaluatesTo("__country",cinfo + "ContactAddress/Country",doc);
  assertXpathEvaluatesTo("__phone",cinfo + "ContactVoiceTelephone",doc);
  assertXpathEvaluatesTo("__fax",cinfo + "ContactFacsimileTelephone",doc);
  assertXpathEvaluatesTo("e@mail",cinfo + "ContactElectronicMailAddress",doc);
}
