{
  GetFeatureType request=(GetFeatureType)OwsUtils.parameter(operation.getParameters(),GetFeatureType.class);
  if (request.getHandle() != null) {
    LOGGER.log(Level.FINE,"Using handle for file name: " + request.getHandle());
    return request.getHandle();
  }
  StringBuffer sb=new StringBuffer();
  for (Iterator f=request.getQuery().iterator(); f.hasNext(); ) {
    QueryType query=(QueryType)f.next();
    sb.append(getLayerName(query) + "_");
  }
  sb.setLength(sb.length() - 1);
  LOGGER.log(Level.FINE,"Using layer names for file name: " + sb.toString());
  if (sb.length() > 20) {
    LOGGER.log(Level.WARNING,"Calculated filename too long. Returing a shorter one: " + sb.toString().substring(0,20));
    return sb.toString().substring(0,20);
  }
  return sb.toString();
}
