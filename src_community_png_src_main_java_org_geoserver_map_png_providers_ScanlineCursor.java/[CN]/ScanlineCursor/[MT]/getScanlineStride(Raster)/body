{
  if (raster.getSampleModel() instanceof ComponentSampleModel) {
    ComponentSampleModel csm=((ComponentSampleModel)raster.getSampleModel());
    return csm.getScanlineStride();
  }
 else {
    return raster.getDataBuffer().getSize() / raster.getHeight();
  }
}
