{
  if (featureSource instanceof FeatureLocking) {
    return new GeoServerFeatureLocking((FeatureLocking<SimpleFeatureType,SimpleFeature>)featureSource,schema,definitionQuery,declaredCRS,srsHandling,linearizationTolerance,metadata);
  }
 else   if (featureSource instanceof FeatureStore) {
    return new GeoServerFeatureStore((FeatureStore<SimpleFeatureType,SimpleFeature>)featureSource,schema,definitionQuery,declaredCRS,srsHandling,linearizationTolerance,metadata);
  }
  return new GeoServerFeatureSource(featureSource,schema,definitionQuery,declaredCRS,srsHandling,null,metadata);
}
