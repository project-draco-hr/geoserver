{
  if (featureSource instanceof FeatureLocking) {
    return new GeoServerFeatureLocking((FeatureLocking<SimpleFeatureType,SimpleFeature>)featureSource,schema,definitionQuery,declaredCRS,srsHandling);
  }
 else   if (featureSource instanceof FeatureStore) {
    return new GeoServerFeatureStore((FeatureStore<SimpleFeatureType,SimpleFeature>)featureSource,schema,definitionQuery,declaredCRS,srsHandling);
  }
  return new GeoServerFeatureSource(featureSource,schema,definitionQuery,declaredCRS,srsHandling);
}
