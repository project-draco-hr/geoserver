{
  FeatureCollectionType client=make(makeManyFeatures(70000));
  FeatureCollectionType server=make(makeManyFeatures(100000));
  GeoserverClientSynchronizer synchronizer=new GeoserverClientSynchronizer(makeConfiguration(),"url",SimulatedRequestBuilder.POST_TEMPLATE);
  Map<Identifier,FeatureAccessor> clientMap=asMap(client);
  RequestBuilder builder=new SimulatedRequestBuilder(server);
  synchronizer.setRequestBuilder(builder);
  synchronizer.synchronize(clientMap);
  assertEquals(100000,clientMap.size());
  check(clientMap,0,"fid.0");
  check(clientMap,1,"fid.1");
  check(clientMap,2,"fid.2");
  check(clientMap,99999,"fid.99999");
  assertEquals(30000,synchronizer.getNumCreates());
  assertEquals(0,synchronizer.getNumUpdates());
  assertEquals(0,synchronizer.getNumDeletes());
  assertEquals(5,synchronizer.getNumRounds());
}
