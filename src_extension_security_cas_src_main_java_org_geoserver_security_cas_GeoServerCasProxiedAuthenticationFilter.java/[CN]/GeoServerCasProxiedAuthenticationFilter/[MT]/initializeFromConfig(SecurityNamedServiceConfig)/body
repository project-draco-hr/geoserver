{
  super.initializeFromConfig(config);
  CasProxiedAuthenticationFilterConfig authConfig=(CasProxiedAuthenticationFilterConfig)config;
  validator=new GeoServerCas20ProxyTicketValidator(authConfig.getCasServerUrlPrefix());
  validator.setAcceptAnyProxy(true);
  validator.setProxyGrantingTicketStorage(pgtStorageFilter);
  validator.setRenew(authConfig.isSendRenew());
  if (StringUtils.hasLength(authConfig.getProxyCallbackUrlPrefix()))   validator.setProxyCallbackUrl(GeoServerCasConstants.createProxyCallBackURl(authConfig.getProxyCallbackUrlPrefix()));
  createSession=authConfig.isCreateHTTPSessionForValidTicket();
  aep=new AuthenticationEntryPoint(){
    @Override public void commence(    HttpServletRequest request,    HttpServletResponse response,    AuthenticationException authException) throws IOException, ServletException {
      HttpServletResponse httpResponse=(HttpServletResponse)response;
      httpResponse.sendError(HttpServletResponse.SC_UNAUTHORIZED,"Unauthorized");
    }
  }
;
}
