{
  addLayer();
  addStyle();
  CatalogFactory factory=catalog.getFactory();
  LayerGroupInfo lg1=factory.createLayerGroup();
  lg1.setName("lg");
  lg1.setWorkspace(ws);
  lg1.getLayers().add(l);
  lg1.getStyles().add(s);
  catalog.add(lg1);
  WorkspaceInfo ws2=factory.createWorkspace();
  ws2.setName("ws2");
  catalog.add(ws2);
  NamespaceInfo ns2=factory.createNamespace();
  ns2.setPrefix("ns2");
  ns2.setURI("http://ns2");
  catalog.add(ns2);
  DataStoreInfo ds2=factory.createDataStore();
  ds2.setEnabled(true);
  ds2.setName("dsName");
  ds2.setDescription("dsDescription");
  ds2.setWorkspace(ws2);
  catalog.add(ds2);
  FeatureTypeInfo ft2=factory.createFeatureType();
  ft2.setEnabled(true);
  ft2.setName("ftName");
  ft2.setAbstract("ftAbstract");
  ft2.setDescription("ftDescription");
  ft2.setStore(ds2);
  ft2.setNamespace(ns2);
  catalog.add(ft2);
  StyleInfo s2=factory.createStyle();
  s2.setName("styleName");
  s2.setFilename("styleFilename");
  s2.setWorkspace(ws2);
  LayerInfo l2=factory.createLayer();
  l2.setEnabled(true);
  l2.setResource(ft2);
  l2.setDefaultStyle(s2);
  catalog.add(l2);
  LayerGroupInfo lg2=catalog.getFactory().createLayerGroup();
  lg2.setName("lg");
  lg2.setWorkspace(ws2);
  lg2.getLayers().add(l2);
  lg2.getStyles().add(s2);
  catalog.add(lg2);
  assertNotNull(catalog.getLayerGroupByName("lg"));
  assertEquals(lg1,catalog.getLayerGroupByName(ws.getName(),"lg"));
  assertEquals(lg1,catalog.getLayerGroupByName(ws,"lg"));
  assertEquals(lg2,catalog.getLayerGroupByName(ws2.getName(),"lg"));
  assertEquals(lg2,catalog.getLayerGroupByName(ws2,"lg"));
}
