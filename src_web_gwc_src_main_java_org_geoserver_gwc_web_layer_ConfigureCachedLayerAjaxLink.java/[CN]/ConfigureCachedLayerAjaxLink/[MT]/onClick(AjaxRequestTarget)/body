{
  final TileLayer layer=getModelObject();
  if (!(layer instanceof GeoServerTileLayer)) {
    return;
  }
  final GeoServerTileLayer geoserverTileLayer=(GeoServerTileLayer)getModelObject();
  LayerInfo layerInfo=geoserverTileLayer.getLayerInfo();
  if (layerInfo != null) {
    ResourceConfigurationPage resourceConfigPage;
    resourceConfigPage=new ResourceConfigurationPage(layerInfo,false);
    resourceConfigPage.setSelectedTab(LayerCacheOptionsTabPanel.class);
    if (returnPage != null) {
      resourceConfigPage.setReturnPage(returnPage);
    }
    setResponsePage(resourceConfigPage);
  }
 else {
    LayerGroupInfo layerGroup=geoserverTileLayer.getLayerGroupInfo();
    WorkspaceInfo workspace=layerGroup.getWorkspace();
    String wsName=workspace == null ? null : workspace.getName();
    Map<String,String> params=new HashMap<String,String>();
    params.put(LayerGroupEditPage.GROUP,layerGroup.getName());
    params.put(LayerGroupEditPage.WORKSPACE,wsName);
    PageParameters parameters=new PageParameters(params);
    LayerGroupEditPage layerGroupEditPage=new LayerGroupEditPage(parameters);
    if (returnPage != null) {
      layerGroupEditPage.setReturnPage(returnPage);
    }
    setResponsePage(layerGroupEditPage);
  }
}
