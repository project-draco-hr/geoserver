{
  super(id,model);
  PropertyModel<MetadataMap> settingsMap=new PropertyModel<MetadataMap>(model,"resource.metadata");
  MetadataMap map=settingsMap.getObject();
  DirectDownloadSettings settings=DirectDownloadSettings.getSettingsFromMetadata(map,null);
  if (settings == null) {
    map.getMap().put(DirectDownloadSettings.DIRECTDOWNLOAD_KEY,setDefaultSettings(GeoServerExtensions.bean(GeoServer.class).getService(CSWInfo.class)));
  }
  IModel<DirectDownloadSettings> directDownloadModel=new MetadataMapModel(map,DirectDownloadSettings.DIRECTDOWNLOAD_KEY,DirectDownloadSettings.class);
  directDownloadEnabled=new CheckBox("directDownloadEnabled",new PropertyModel(directDownloadModel,"directDownloadEnabled"));
  add(directDownloadEnabled);
  maxDownloadSize=new TextField<Integer>("maxDownloadSize",new PropertyModel(directDownloadModel,"maxDownloadSize"));
  maxDownloadSize.add(new MinimumValidator(0l));
  add(maxDownloadSize);
}
