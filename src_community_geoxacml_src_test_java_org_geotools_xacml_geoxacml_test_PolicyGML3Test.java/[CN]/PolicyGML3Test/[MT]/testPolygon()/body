{
  GeometryAttribute[] array=new GeometryAttribute[2];
  AbstractPolicy p1=TestSupport.policyFromFile(TestSupport.getGeoXACMLFNFor("gml3","PolygonPolicy.xml"));
  array[0]=TestSupport.getGeometryAttribute(p1);
  AbstractPolicy p2=policyFromAttributeEncoding(array[0],xmlTemplate);
  array[1]=TestSupport.getGeometryAttribute(p2);
  for (  GeometryAttribute attr : array) {
    assertTrue(attr.getSrsName().equals("EPSG:4326"));
    assertTrue(attr.getGid().equals("Polygon"));
    assertTrue(attr.getGmlVersion() == GMLVersion.Version3);
    Polygon poly=(Polygon)attr.getGeometry();
    Coordinate[] coords=poly.getExteriorRing().getCoordinates();
    assertTrue(coords[0].x == 0);
    assertTrue(coords[0].y == 0);
    assertTrue(coords[1].x == 0);
    assertTrue(coords[1].y == 100);
    assertTrue(coords[2].x == 100);
    assertTrue(coords[2].y == 100);
    assertTrue(coords[3].x == 100);
    assertTrue(coords[3].y == 0);
    assertTrue(coords[4].x == 0);
    assertTrue(coords[4].y == 0);
    coords=poly.getInteriorRingN(0).getCoordinates();
    assertTrue(coords[0].x == 10);
    assertTrue(coords[0].y == 10);
    assertTrue(coords[1].x == 10);
    assertTrue(coords[1].y == 20);
    assertTrue(coords[2].x == 20);
    assertTrue(coords[2].y == 20);
    assertTrue(coords[3].x == 20);
    assertTrue(coords[3].y == 10);
    assertTrue(coords[4].x == 10);
    assertTrue(coords[4].y == 10);
    coords=poly.getInteriorRingN(1).getCoordinates();
    assertTrue(coords[0].x == 50);
    assertTrue(coords[0].y == 50);
    assertTrue(coords[1].x == 50);
    assertTrue(coords[1].y == 60);
    assertTrue(coords[2].x == 60);
    assertTrue(coords[2].y == 60);
    assertTrue(coords[3].x == 60);
    assertTrue(coords[3].y == 50);
    assertTrue(coords[4].x == 50);
    assertTrue(coords[4].y == 50);
  }
}
