{
  WFSInfo wfs=getGeoServer().getService(WFSInfo.class);
  wfs.getMetadata().put(InspireMetadata.LANGUAGE.key,"fre");
  wfs.getMetadata().put(InspireMetadata.SERVICE_METADATA_URL.key,"http://foo.com?bar=baz");
  wfs.getMetadata().put(InspireMetadata.SERVICE_METADATA_TYPE.key,"application/vnd.ogc.csw.GetRecordByIdResponse_xml");
  wfs.getMetadata().put(InspireMetadata.SPATIAL_DATASET_IDENTIFIER_TYPE.key,"one,http://www.geoserver.org/inspire/one");
  getGeoServer().save(wfs);
  Document dom=getAsDOM(WFS_2_0_0_GETCAPREQUEST);
  assertMetadataUrlAndMediaType(dom,"http://foo.com?bar=baz","application/vnd.ogc.csw.GetRecordByIdResponse_xml");
  wfs.getMetadata().put(InspireMetadata.SERVICE_METADATA_TYPE.key,"application/xml");
  getGeoServer().save(wfs);
  dom=getAsDOM(WFS_2_0_0_GETCAPREQUEST);
  assertMetadataUrlAndMediaType(dom,"http://foo.com?bar=baz","application/xml");
}
