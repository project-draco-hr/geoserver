{
  if (referencedEnvelope != null) {
    AttributesImpl attributes=new AttributesImpl();
    attributes.addAttribute("","srsName","srsName","",srsName);
    final StringBuilder minCP=new StringBuilder(Double.toString(referencedEnvelope.getMinX())).append(" ").append(referencedEnvelope.getMinY());
    final StringBuilder maxCP=new StringBuilder(Double.toString(referencedEnvelope.getMaxX())).append(" ").append(referencedEnvelope.getMaxY());
    if (timeMetadata != null && timeMetadata.length() > 0) {
      start("gml:EnvelopeWithTimePeriod",attributes);
      element("gml:pos",minCP.toString());
      element("gml:pos",maxCP.toString());
      final String[] timePositions=timeMetadata.split(",");
      element("gml:timePosition",timePositions[0]);
      element("gml:timePosition",timePositions[timePositions.length - 1]);
      end("gml:EnvelopeWithTimePeriod");
    }
 else {
      start("gml:Envelope",attributes);
      element("gml:pos",minCP.toString());
      element("gml:pos",maxCP.toString());
      end("gml:Envelope");
    }
  }
}
