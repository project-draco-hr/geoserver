{
  for (  Coordinate coordinate : coordinates) {
    if (coordinate.z == Double.NaN) {
      coordinate.z=0;
    }
    if (this.pointsIndexis.containsKey(this.getHashCode(coordinate))) {
      this.indexis.append(pointsIndexis.get(this.getHashCode(coordinate)) + " ");
    }
 else {
      this.coordinates.add(coordinate);
      String x=String.valueOf(coordinate.x);
      String y=String.valueOf(coordinate.y);
      String z="0.0";
      Double zValue=new Double(coordinate.z);
      if (!(zValue.equals(Double.NaN))) {
        z=String.valueOf(coordinate.z);
      }
      if (coordinatesType == X3DDefinitions.GEOGRAPHIC_DEGREES.getCode()) {
        this.points.append(x + " ");
        this.points.append(y + " ");
        this.points.append(z + " ");
      }
 else {
        this.points.append(y + " ");
        this.points.append(z + " ");
        this.points.append(x + " ");
      }
      this.index++;
      this.pointsIndexis.put(this.getHashCode(coordinate),this.index);
      this.indexis.append(this.index + " ");
    }
  }
  this.indexis.append("-1 ");
}
