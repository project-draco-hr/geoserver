{
  Catalog catalog=new CatalogImpl();
  CatalogFactory cFactory=catalog.getFactory();
  WorkspaceInfo ws=cFactory.createWorkspace();
  ws.setName("foo");
  catalog.add(ws);
  NamespaceInfo ns=cFactory.createNamespace();
  ns.setPrefix("acme");
  ns.setURI("http://acme.org");
  catalog.add(ns);
  CoverageStoreInfo cs=cFactory.createCoverageStore();
  cs.setWorkspace(ws);
  cs.setName("foo");
  catalog.add(cs);
  CoverageInfo cv=cFactory.createCoverage();
  cv.setStore(cs);
  cv.setNamespace(ns);
  cv.setName("cv");
  cv.setAbstract("abstract");
  cv.setSRS("EPSG:4326");
  cv.setNativeCRS(CRS.decode("EPSG:4326"));
  cv.getParameters().put("foo",null);
  ByteArrayOutputStream out=out();
  persister.save(cv,out);
  persister.setCatalog(catalog);
  cv=persister.load(in(out),CoverageInfo.class);
  assertNotNull(cv);
  assertEquals("cv",cv.getName());
  assertEquals(cs,cv.getStore());
  assertEquals(ns,cv.getNamespace());
  assertEquals("EPSG:4326",cv.getSRS());
  assertTrue(cv.getParameters().containsKey("foo"));
  assertNull(cv.getParameters().get("foo"));
  assertTrue(CRS.equalsIgnoreMetadata(CRS.decode("EPSG:4326"),cv.getNativeCRS()));
}
