{
  Catalog catalog=new CatalogImpl();
  CatalogFactory cFactory=catalog.getFactory();
  WorkspaceInfo ws=cFactory.createWorkspace();
  ws.setName("foo");
  catalog.add(ws);
  NamespaceInfo ns=cFactory.createNamespace();
  ns.setPrefix("acme");
  ns.setURI("http://acme.org");
  catalog.add(ns);
  CoverageStoreInfo cs=cFactory.createCoverageStore();
  cs.setWorkspace(ws);
  cs.setName("coveragestore");
  catalog.add(cs);
  CoverageInfo cv=cFactory.createCoverage();
  cv.setStore(cs);
  cv.setNamespace(ns);
  cv.setName("coverage");
  cv.setAbstract("abstract");
  cv.setSRS("EPSG:4326");
  cv.setNativeCRS(CRS.decode("EPSG:4326"));
  cv.getParameters().put("foo",null);
  ByteArrayOutputStream out=out();
  persister.save(cv,out);
  ByteArrayInputStream in=in(out);
  Document dom=dom(in);
  Element crs=dom.createElement("crs");
  Text t=dom.createTextNode("EPSG:4326");
  crs.appendChild(t);
  Element high=dom.createElement("high");
  t=dom.createTextNode("4029 4029");
  high.appendChild(t);
  Element low=dom.createElement("low");
  t=dom.createTextNode("0 0");
  low.appendChild(t);
  Element range=dom.createElement("range");
  range.appendChild(high);
  range.appendChild(low);
  Element translateX=dom.createElement("translateX");
  t=dom.createTextNode("0");
  translateX.appendChild(t);
  Element translateY=dom.createElement("translateY");
  t=dom.createTextNode("0");
  translateY.appendChild(t);
  Element scaleX=dom.createElement("scaleX");
  t=dom.createTextNode("1");
  scaleX.appendChild(t);
  Element scaleY=dom.createElement("scaleY");
  t=dom.createTextNode("1");
  scaleY.appendChild(t);
  Element shearX=dom.createElement("shearX");
  t=dom.createTextNode("0");
  shearX.appendChild(t);
  Element shearY=dom.createElement("shearY");
  t=dom.createTextNode("0");
  shearY.appendChild(t);
  Element transform=dom.createElement("transform");
  transform.appendChild(translateX);
  transform.appendChild(translateY);
  transform.appendChild(scaleX);
  transform.appendChild(scaleY);
  transform.appendChild(shearX);
  transform.appendChild(shearY);
  Element grid=dom.createElement("grid");
  grid.setAttribute("dimension","2");
  grid.appendChild(crs);
  grid.appendChild(range);
  grid.appendChild(transform);
  Element e=(Element)dom.getElementsByTagName("coverage").item(0);
  Element params=(Element)dom.getElementsByTagName("parameters").item(0);
  e.insertBefore(grid,params);
  in=in(dom);
  persister.setCatalog(catalog);
  cv=persister.load(in,CoverageInfo.class);
  assertNotNull(cv);
  assertNotNull(cv.getGrid());
  assertNotNull(cv.getGrid().getGridRange());
  assertNotNull(cv.getCRS());
  assertNotNull(cv.getGrid().getGridToCRS());
  assertEquals(cv.getGrid().getGridRange().getLow(0),0);
}
