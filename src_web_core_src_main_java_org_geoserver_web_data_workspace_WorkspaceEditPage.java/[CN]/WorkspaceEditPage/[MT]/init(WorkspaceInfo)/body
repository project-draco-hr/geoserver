{
  defaultWs=ws.getId().equals(getCatalog().getDefaultWorkspace().getId());
  wsModel=new WorkspaceDetachableModel(ws);
  NamespaceInfo ns=getCatalog().getNamespaceByPrefix(ws.getName());
  nsModel=new NamespaceDetachableModel(ns);
  Form form=new Form("form",new CompoundPropertyModel(nsModel)){
    protected void onSubmit(){
      try {
        saveWorkspace();
      }
 catch (      RuntimeException e) {
        error(e.getMessage());
      }
    }
  }
;
  add(form);
  boolean isFullAdmin=isAuthenticatedAsAdmin();
  TextField name=new TextField("name",new PropertyModel(wsModel,"name"));
  name.setRequired(true);
  name.setEnabled(isFullAdmin);
  name.add(new XMLNameValidator());
  form.add(name);
  TextField uri=new TextField("uri",new PropertyModel(nsModel,"uRI"),String.class);
  uri.setRequired(true);
  uri.add(new URIValidator());
  form.add(uri);
  CheckBox defaultChk=new CheckBox("default",new PropertyModel(this,"defaultWs"));
  form.add(defaultChk);
  defaultChk.setEnabled(isFullAdmin);
  form.add(settingsPanel=new SettingsPanel("settings",wsModel));
  form.add(new AjaxLink("settingsHelp"){
    @Override public void onClick(    AjaxRequestTarget target){
      dialog.showInfo(target,new StringResourceModel("settingsHelp.title",WorkspaceEditPage.this,null),new StringResourceModel("settingsHelp.message.1",WorkspaceEditPage.this,null),new StringResourceModel("settingsHelp.message.2",WorkspaceEditPage.this,null));
    }
  }
);
  form.add(servicesPanel=new ServicesPanel("services",wsModel));
  form.add(new AjaxLink("servicesHelp"){
    @Override public void onClick(    AjaxRequestTarget target){
      dialog.showInfo(target,new StringResourceModel("servicesHelp.title",WorkspaceEditPage.this,null),new StringResourceModel("servicesHelp.message.1",WorkspaceEditPage.this,null),new StringResourceModel("servicesHelp.message.2",WorkspaceEditPage.this,null));
    }
  }
);
  SubmitLink submit=new SubmitLink("save");
  form.add(submit);
  form.setDefaultButton(submit);
  form.add(new BookmarkablePageLink("cancel",WorkspacePage.class));
  add(dialog=new GeoServerDialog("dialog"));
}
