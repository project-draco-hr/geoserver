{
  return new AjaxSubmitLink("copy"){
    @Override protected void onSubmit(    AjaxRequestTarget target,    Form form){
      styles.processInput();
      StyleInfo style=(StyleInfo)styles.getConvertedInput();
      if (style != null) {
        try {
          editor.reset();
          setRawStyle(readFile(style));
          formatChoice.setModelObject(style.getFormat());
          target.appendJavascript(String.format("if (document.gsEditors) { document.gsEditors.editor.setOption('mode', '%s'); }",styleHandler().getCodeMirrorEditMode()));
        }
 catch (        Exception e) {
          error("Errors occurred loading the '" + style.getName() + "' style");
        }
        target.addComponent(styleForm);
      }
    }
    @Override protected IAjaxCallDecorator getAjaxCallDecorator(){
      return new AjaxPreprocessingCallDecorator(super.getAjaxCallDecorator()){
        @Override public CharSequence preDecorateScript(        CharSequence script){
          return "var val = event.view.document.gsEditors ? " + "event.view.document.gsEditors." + editor.getTextAreaMarkupId() + ".getValue() : "+ "event.view.document.getElementById(\""+ editor.getTextAreaMarkupId()+ "\").value; "+ "if(val != '' &&"+ "!confirm('"+ new ParamResourceModel("confirmOverwrite",AbstractStylePage.this).getString()+ "')) return false;"+ script;
        }
      }
;
    }
    @Override public boolean getDefaultFormProcessing(){
      return false;
    }
  }
;
}
