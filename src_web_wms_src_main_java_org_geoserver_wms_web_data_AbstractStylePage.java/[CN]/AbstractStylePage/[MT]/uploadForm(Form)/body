{
  return new Form("uploadForm"){
    @Override protected void onSubmit(){
      FileUpload upload=fileUploadField.getFileUpload();
      if (upload == null) {
        warn("No file selected.");
        return;
      }
      ByteArrayOutputStream bout=new ByteArrayOutputStream();
      try {
        IOUtils.copy(upload.getInputStream(),bout);
        setRawStyle(new InputStreamReader(new ByteArrayInputStream(bout.toByteArray()),"UTF-8"));
        editor.setModelObject(rawStyle);
      }
 catch (      IOException e) {
        throw new WicketRuntimeException(e);
      }
      StyleInfo s=(StyleInfo)form.getModelObject();
      if (s.getName() == null || "".equals(s.getName().trim())) {
        nameTextField.setModelValue(ResponseUtils.stripExtension(upload.getClientFileName()));
        nameTextField.modelChanged();
      }
    }
  }
;
}
