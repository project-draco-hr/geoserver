{
  final IModel geoServerModel=getGeoServerModel();
  final IModel jaiModel=getJAIModel();
  Form form=new Form("form",new CompoundPropertyModel(jaiModel));
  add(form);
  NumberValidator percentageValidator=NumberValidator.range(0,1);
  TextField memoryCapacity=new TextField("memoryCapacity");
  memoryCapacity.add(percentageValidator);
  form.add(memoryCapacity);
  TextField memoryThreshold=new TextField("memoryThreshold");
  memoryThreshold.add(percentageValidator);
  form.add(memoryThreshold);
  TextField tileThreads=new TextField("tileThreads");
  tileThreads.add(NumberValidator.POSITIVE);
  form.add(tileThreads);
  TextField tilePriority=new TextField("tilePriority");
  tilePriority.add(NumberValidator.POSITIVE);
  form.add(tilePriority);
  form.add(new CheckBox("recycling"));
  form.add(new CheckBox("jpegAcceleration"));
  addPngEncoderEditor(form);
  CheckBox checkBoxMosaic=new CheckBox("allowNativeMosaic");
  CheckBox checkBoxWarp=new CheckBox("allowNativeWarp");
  JAIInfo info=(JAIInfo)jaiModel.getObject();
  JAIEXTInfo je=null;
  boolean isJAIExtEnabled=ImageWorker.isJaiExtEnabled();
  if (isJAIExtEnabled) {
    je=info.getJAIEXTInfo();
  }
  boolean mosaicEnabled=je != null && !je.getJAIEXTOperations().contains("Mosaic");
  boolean warpEnabled=je != null && !je.getJAIEXTOperations().contains("Warp");
  checkBoxMosaic.setEnabled(mosaicEnabled);
  checkBoxWarp.setEnabled(warpEnabled);
  form.add(checkBoxMosaic);
  form.add(checkBoxWarp);
  JAIEXTPanel jaiExtPanel=new JAIEXTPanel("jaiext",jaiModel);
  if (!isJAIExtEnabled) {
    jaiExtPanel.setVisible(false);
  }
  form.add(jaiExtPanel);
  Button submit=new Button("submit",new StringResourceModel("submit",this,null)){
    @Override public void onSubmit(){
      GeoServer gs=(GeoServer)geoServerModel.getObject();
      GeoServerInfo global=gs.getGlobal();
      global.setJAI((JAIInfo)jaiModel.getObject());
      gs.save(global);
      doReturn();
    }
  }
;
  form.add(submit);
  Button cancel=new Button("cancel"){
    @Override public void onSubmit(){
      doReturn();
    }
  }
;
  form.add(cancel);
}
