{
  TreeSet<AbstractPolicy> set=policies.get(identifier);
  if (set == null)   return null;
  for (  AbstractPolicy policy : set) {
    if (constraints.meetsConstraint(policy.getVersion())) {
      if (type == PolicyReference.POLICY_REFERENCE) {
        if (policy instanceof Policy)         return policy;
      }
 else {
        if (policy instanceof PolicySet)         return policy;
      }
    }
  }
  return null;
}
