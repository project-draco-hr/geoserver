{
  WFSInfo wfs=getGeoServer().getService(WFSInfo.class);
  wfs.setEncodeFeatureMember(true);
  getGeoServer().save(wfs);
  String path="wfs?request=GetFeature&version=1.1.0&typename=gsml:GeologicUnit&featureid=gu.25699";
  Document doc=getAsDOM(path);
  LOGGER.info("WFS GetFeature&typename=gsml:GeologicUnit&featureid=gu.25699:\n" + prettyString(doc));
  assertEquals(1,doc.getElementsByTagName("gml:featureMember").getLength());
  assertXpathCount(1,"//gsml:GeologicUnit[@gml:id='gu.25699']",doc);
  Node feature=doc.getElementsByTagName("gsml:GeologicUnit").item(0);
  assertEquals("gsml:GeologicUnit",feature.getNodeName());
  Node description=feature.getFirstChild();
  assertEquals("gml:description",description.getNodeName());
  assertXpathEvaluatesTo("Olivine basalt, tuff, microgabbro, minor sedimentary rocks","//gsml:GeologicUnit[@gml:id='gu.25699']/gml:description",doc);
  Node name1=description.getNextSibling();
  assertEquals("gml:name",name1.getNodeName());
  assertXpathEvaluatesTo("Yaugher Volcanic Group","//gsml:GeologicUnit[@gml:id='gu.25699']/gml:name[1]",doc);
  Node name2=name1.getNextSibling();
  assertEquals("gml:name",name2.getNodeName());
  assertXpathEvaluatesTo("-Py","//gsml:GeologicUnit[@gml:id='gu.25699']/gml:name[2]",doc);
  Node observationMethod=name2.getNextSibling();
  assertEquals("gsml:observationMethod",observationMethod.getNodeName());
  assertXpathEvaluatesTo("urn:ogc:def:nil:OGC::missing","//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:observationMethod/gsml:CGI_TermValue/gsml:value",doc);
  assertXpathEvaluatesTo("http://urn.opengis.net","//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:observationMethod/gsml:CGI_TermValue/gsml:value/@codeSpace",doc);
  Node purpose=observationMethod.getNextSibling();
  assertEquals("gsml:purpose",purpose.getNodeName());
  assertXpathEvaluatesTo("instance","//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:purpose",doc);
  Node occurrence=purpose.getNextSibling();
  assertEquals("gsml:occurrence",occurrence.getNodeName());
  assertXpathCount(1,"//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:occurrence[@xlink:href='urn:cgi:feature:MappedFeature:mf1']",doc);
  Node geologicUnitType=occurrence.getNextSibling();
  assertEquals("gsml:geologicUnitType",geologicUnitType.getNodeName());
  assertXpathEvaluatesTo("urn:ogc:def:nil:OGC::unknown","//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:geologicUnitType/@xlink:href",doc);
  Node exposureColor=geologicUnitType.getNextSibling();
  assertEquals("gsml:exposureColor",exposureColor.getNodeName());
  assertXpathEvaluatesTo("Blue","//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:exposureColor/gsml:CGI_TermValue/gsml:value",doc);
  Node outcropCharacter=exposureColor.getNextSibling();
  assertEquals("gsml:outcropCharacter",outcropCharacter.getNodeName());
  assertXpathEvaluatesTo("x","//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:outcropCharacter/gsml:CGI_TermValue/gsml:value",doc);
  Node composition=outcropCharacter.getNextSibling();
  assertEquals("gsml:composition",composition.getNodeName());
  Node compositionPart=doc.getElementsByTagName("gsml:CompositionPart").item(0);
  assertEquals("gsml:CompositionPart",compositionPart.getNodeName());
  Node role=compositionPart.getFirstChild();
  assertEquals("gsml:role",role.getNodeName());
  assertXpathEvaluatesTo("fictitious component","//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:composition/gsml:CompositionPart/gsml:role",doc);
  Node lithology=role.getNextSibling();
  assertEquals("gsml:lithology",lithology.getNodeName());
  assertXpathEvaluatesTo("urn:ogc:def:nil:OGC::missing","//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:composition/gsml:CompositionPart/gsml:lithology" + "/gsml:ControlledConcept/gsml:vocabulary/@xlink:href",doc);
  Node proportion=lithology.getNextSibling();
  assertEquals("gsml:proportion",proportion.getNodeName());
  assertXpathEvaluatesTo("nonexistent","//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:composition/gsml:CompositionPart/gsml:proportion" + "/gsml:CGI_TermValue/gsml:value",doc);
  validateGet(path);
}
