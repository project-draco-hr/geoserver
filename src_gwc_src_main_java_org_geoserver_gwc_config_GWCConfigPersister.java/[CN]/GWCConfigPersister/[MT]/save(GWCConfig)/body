{
  LOGGER.finer("Saving integrated GWC configuration");
  File tmp=new File(getConfigRoot(),GWC_CONFIG_FILE + ".tmp");
  XStreamPersister xmlPersister=this.persisterFactory.createXMLPersister();
  configureXstream(xmlPersister.getXStream());
  OutputStream out=new FileOutputStream(tmp);
  try {
    xmlPersister.save(config,out);
  }
  finally {
    out.close();
  }
  File configFile=new File(getConfigRoot(),GWC_CONFIG_FILE);
  IOUtils.rename(tmp,configFile);
  this.config=config;
  LOGGER.finer("Integrated GWC configuration saved to " + configFile.getAbsolutePath());
}
