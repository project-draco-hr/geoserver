{
  if (clipToMapBounds) {
    Geometry clippingPolygon;
    if (transformToScreenCoordinates) {
      Rectangle screen=context.paintArea;
      Envelope paintArea=new Envelope(0,screen.getWidth(),0,screen.getHeight());
      clippingPolygon=JTS.toGeometry(paintArea);
    }
 else {
      ReferencedEnvelope renderingArea=context.renderingArea;
      clippingPolygon=JTS.toGeometry(renderingArea);
    }
    addLast(new Clip(clippingPolygon));
  }
  return this;
}
