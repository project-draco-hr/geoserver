{
  assertEquals(original.getWidth(),image.getWidth());
  assertEquals(original.getHeight(),image.getHeight());
  if (!isClibAvailable()) {
    assertEquals(original.getSampleModel(),image.getSampleModel());
    assertEquals(original.getColorModel(),image.getColorModel());
  }
  for (int x=0; x < original.getWidth(); x++) {
    for (int y=0; y < original.getHeight(); y++) {
      int rgbOriginal=original.getRGB(x,y);
      int rgbActual=image.getRGB(x,y);
      if (rgbOriginal != rgbActual) {
        fail("Comparison failed at x:" + x + ", y: "+ y+ ", expected "+ colorToString(rgbOriginal)+ ", got "+ colorToString(rgbActual));
      }
    }
  }
}
