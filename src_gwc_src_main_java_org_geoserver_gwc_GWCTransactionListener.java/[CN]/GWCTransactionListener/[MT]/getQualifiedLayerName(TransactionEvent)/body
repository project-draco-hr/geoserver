{
  final String layerName;
  final QName name=event.getLayerName();
  final String namespaceURI=name.getNamespaceURI();
  final String localName=name.getLocalPart();
  if (!XMLConstants.NULL_NS_URI.equals(namespaceURI)) {
    NamespaceInfo namespaceInfo=catalog.getNamespaceByURI(namespaceURI);
    if (namespaceInfo == null) {
      log.info("Can't find namespace info for layer " + name + ". Cache not truncated");
      throw new NoSuchElementException("Layer not found: " + name);
    }
    String prefix=namespaceInfo.getPrefix();
    layerName=prefix + ":" + localName;
  }
 else {
    LayerInfo layerInfo=catalog.getLayerByName(localName);
    if (layerInfo == null) {
      log.info("Can't find layer " + localName + ". Cache not truncated");
      throw new NoSuchElementException("Layer not found: " + localName);
    }
    ResourceInfo resource=layerInfo.getResource();
    layerName=resource.getPrefixedName();
  }
  return layerName;
}
