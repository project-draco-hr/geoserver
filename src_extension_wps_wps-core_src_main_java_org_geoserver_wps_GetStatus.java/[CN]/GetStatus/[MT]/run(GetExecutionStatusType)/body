{
  String executionId=request.getExecutionId();
  ExecutionStatus status=tracker.getStatus(executionId);
  if (status == null) {
    throw new WPSException("Unknown execution id " + executionId + ", either the execution was never submitted or too much time "+ "elapsed since the process completed");
  }
  if (status.getPhase().isExecutionCompleted()) {
    Resource storedResponse=resources.getStoredResponse(executionId);
    if (storedResponse == null || storedResponse.getType() == Type.UNDEFINED) {
      throw new WPSException("The execution is completed with status " + status.getPhase() + " and yet the response cannot be located on disk, this is an internal failure");
    }
 else {
      return storedResponse;
    }
  }
 else {
    try {
      ExecuteType execute=status.getRequest();
      if (execute == null) {
        execute=resources.getStoredRequestObject(executionId);
      }
      if (execute == null) {
        throw new WPSException("Could not locate the original request for execution id: " + executionId);
      }
 else {
        ExecuteResponseBuilder builder=new ExecuteResponseBuilder(execute,ctx,status);
        return builder.build();
      }
    }
 catch (    IOException e) {
      throw new WPSException("Failed to write status response",e);
    }
  }
}
