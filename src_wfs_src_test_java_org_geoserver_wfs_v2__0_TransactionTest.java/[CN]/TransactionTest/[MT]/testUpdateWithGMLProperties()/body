{
  String xml="<wfs:Transaction service=\"WFS\" version=\"2.0.0\" " + "xmlns:sf=\"http://cite.opengeospatial.org/gmlsf\" " + "xmlns:wfs='" + WFS.NAMESPACE + "' "+ "xmlns:fes='"+ FES.NAMESPACE+ "' "+ "xmlns:gml='"+ GML.NAMESPACE+ "'>"+ " <wfs:Update typeName=\"sf:WithGMLProperties\">"+ "   <wfs:Property>"+ "     <wfs:ValueReference>gml:name</wfs:ValueReference>"+ "     <wfs:Value>two</wfs:Value>"+ "   </wfs:Property>"+ "   <wfs:Property>"+ "     <wfs:ValueReference>gml:location</wfs:ValueReference>"+ "     <wfs:Value>"+ "        <gml:Point>"+ "          <gml:coordinates>2,2</gml:coordinates>"+ "        </gml:Point>"+ "     </wfs:Value>"+ "   </wfs:Property>"+ "   <wfs:Property>"+ "     <wfs:ValueReference>sf:foo</wfs:ValueReference>"+ "     <wfs:Value>2</wfs:Value>"+ "   </wfs:Property>"+ "   <fes:Filter>"+ "     <fes:PropertyIsEqualTo>"+ "       <fes:ValueReference>foo</fes:ValueReference>"+ "       <fes:Literal>1</fes:Literal>"+ "     </fes:PropertyIsEqualTo>"+ "   </fes:Filter>"+ " </wfs:Update>"+ "</wfs:Transaction>";
  Document dom=postAsDOM("wfs",xml);
  assertEquals("wfs:TransactionResponse",dom.getDocumentElement().getNodeName());
  Element updated=getFirstElementByTagName(dom,"wfs:totalUpdated");
  assertEquals("1",updated.getFirstChild().getNodeValue());
  dom=getAsDOM("wfs?request=getfeature&service=wfs&version=2.0.0&typename=sf:WithGMLProperties");
  NodeList features=dom.getElementsByTagName("sf:WithGMLProperties");
  assertEquals(1,features.getLength());
  Element feature=(Element)features.item(0);
  assertEquals("two",getFirstElementByTagName(feature,"gml:name").getFirstChild().getNodeValue());
  assertEquals("2",getFirstElementByTagName(feature,"sf:foo").getFirstChild().getNodeValue());
  Element location=getFirstElementByTagName(feature,"gml:location");
  Element pos=getFirstElementByTagName(location,"gml:pos");
  assertEquals("2.0 2.0",pos.getFirstChild().getNodeValue());
  xml="<wfs:Transaction service=\"WFS\" version=\"2.0.0\" " + "xmlns:sf=\"http://cite.opengeospatial.org/gmlsf\" " + "xmlns:wfs='" + WFS.NAMESPACE + "' "+ "xmlns:fes='"+ FES.NAMESPACE+ "' "+ "xmlns:gml='"+ GML.NAMESPACE+ "'>"+ " <wfs:Update typeName=\"sf:WithGMLProperties\">"+ "   <wfs:Property>"+ "     <wfs:ValueReference>sf:name</wfs:ValueReference>"+ "     <wfs:Value>trhee</wfs:Value>"+ "   </wfs:Property>"+ "   <wfs:Property>"+ "     <wfs:ValueReference>sf:location</wfs:ValueReference>"+ "     <wfs:Value>"+ "        <gml:Point>"+ "          <gml:coordinates>3,3</gml:coordinates>"+ "        </gml:Point>"+ "     </wfs:Value>"+ "   </wfs:Property>"+ "   <wfs:Property>"+ "     <wfs:ValueReference>sf:foo</wfs:ValueReference>"+ "     <wfs:Value>3</wfs:Value>"+ "   </wfs:Property>"+ "   <fes:Filter>"+ "     <fes:PropertyIsEqualTo>"+ "       <fes:ValueReference>foo</fes:ValueReference>"+ "       <fes:Literal>2</fes:Literal>"+ "     </fes:PropertyIsEqualTo>"+ "   </fes:Filter>"+ " </wfs:Update>"+ "</wfs:Transaction>";
  dom=postAsDOM("wfs",xml);
  assertEquals("wfs:TransactionResponse",dom.getDocumentElement().getNodeName());
  updated=getFirstElementByTagName(dom,"wfs:totalUpdated");
  assertEquals("1",updated.getFirstChild().getNodeValue());
  dom=getAsDOM("wfs?request=getfeature&service=wfs&version=2.0.0&typename=sf:WithGMLProperties");
  features=dom.getElementsByTagName("sf:WithGMLProperties");
  assertEquals(1,features.getLength());
  feature=(Element)features.item(0);
  assertEquals("trhee",getFirstElementByTagName(feature,"gml:name").getFirstChild().getNodeValue());
  assertEquals("3",getFirstElementByTagName(feature,"sf:foo").getFirstChild().getNodeValue());
  location=getFirstElementByTagName(feature,"gml:location");
  pos=getFirstElementByTagName(location,"gml:pos");
  assertEquals("3.0 3.0",pos.getFirstChild().getNodeValue());
}
