{
  TransformerBase tr=createTransformer();
  tr.setIndentation(2);
  Document dom=WMSTestSupport.transform(req,tr);
  NodeList legendURLs=XPATH.getMatchingNodes(getLegendURLXPath("cite:states"),dom);
  assertEquals(1,legendURLs.getLength());
  Element legendURL=(Element)legendURLs.item(0);
  assertTrue(legendURL.hasAttribute("width"));
  assertFalse("20".equals(legendURL.getAttribute("width")));
  assertTrue(legendURL.hasAttribute("height"));
  assertFalse("20".equals(legendURL.getAttribute("height")));
  GeoServerResourceLoader loader=GeoServerExtensions.bean(GeoServerResourceLoader.class);
  assertEquals(Resource.Type.RESOURCE,loader.get(Paths.path("workspaces","cite","styles","states.png")).getType());
}
