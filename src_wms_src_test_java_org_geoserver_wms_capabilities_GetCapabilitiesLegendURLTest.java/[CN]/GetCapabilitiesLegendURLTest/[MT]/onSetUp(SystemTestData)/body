{
  super.onSetUp(testData);
  this.catalog=getCatalog();
  testData.copyTo(getClass().getResourceAsStream("/legendURL/BasicPolygons.png"),"styles/BasicPolygons.png");
  testData.copyTo(getClass().getResourceAsStream("/legendURL/Bridges.png"),"styles/Bridges.png");
  testData.addStyle("squares","squares.sld",GetFeatureInfoTest.class,catalog);
  testData.addVectorLayer(SQUARES,Collections.EMPTY_MAP,"squares.properties",GetCapabilitiesLegendURLTest.class,catalog);
  WorkspaceInfo workspaceInfo=catalog.getWorkspaceByName(MockData.CITE_PREFIX);
  testData.addStyle(workspaceInfo,"states","Population.sld",GetCapabilitiesLegendURLTest.class,catalog);
  Map<LayerProperty,Object> properties=new HashMap<LayerProperty,Object>();
  properties.put(LayerProperty.STYLE,"states");
  LocalWorkspace.set(workspaceInfo);
  testData.addVectorLayer(STATES,properties,"states.properties",GetCapabilitiesLegendURLTest.class,catalog);
  LocalWorkspace.set(null);
}
