{
  StringBuilder resultStr=new StringBuilder();
  for (  char ch : input.toCharArray()) {
    if (ch > 128 || ch < 0 || " %$&+,:;=?@<>#%".indexOf(ch) >= 0) {
      try {
        for (        byte enc : Character.toString(ch).getBytes("UTF-8")) {
          resultStr.append(String.format("%%%02x",enc));
        }
      }
 catch (      UnsupportedEncodingException e) {
      }
    }
 else {
      resultStr.append(ch);
    }
  }
  return resultStr.toString();
}
