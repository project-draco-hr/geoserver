{
  Sha1SyncJson local=new Sha1SyncJson().level(1).max(2).hashes(new Sha1SyncPositionHash().position("aa").summary("111111"),new Sha1SyncPositionHash().position("bb").summary("222222"),new Sha1SyncPositionHash().position("cc").summary("333333"));
  Sha1SyncJson remote=new Sha1SyncJson().level(1).max(2).hashes(new Sha1SyncPositionHash().position("aa").summary(null),new Sha1SyncPositionHash().position("bb").summary("212121"),new Sha1SyncPositionHash().position("dd").summary("444444"));
  Sha1SyncJson output=new Sha1SyncJson().level(2).max(1).hashes(new Sha1SyncPositionHash().position("aaaa").summary("aaaaaa"),new Sha1SyncPositionHash().position("aabb").summary("aabbbb"),new Sha1SyncPositionHash().position("bbbb").summary("bbbbbb"),new Sha1SyncPositionHash().position("ccaa").summary("ccaaaa"));
  ServerReconciler r=new ServerReconciler(local,remote);
  r.filterDownNextLevel(output);
  check(output,0,"aaaa","aaaaaa");
  check(output,1,"aabb","aabbbb");
  check(output,2,"bbbb","bbbbbb");
  check(output,3,"dd",null);
  assertEquals(4,output.hashes().size());
}
