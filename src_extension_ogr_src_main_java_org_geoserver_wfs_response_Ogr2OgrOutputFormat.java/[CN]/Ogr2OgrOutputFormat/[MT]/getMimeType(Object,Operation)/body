{
  GetFeatureRequest request=GetFeatureRequest.adapt(operation.getParameters()[0]);
  String outputFormat=request.getOutputFormat();
  OgrFormat format=formats.get(outputFormat);
  if (format == null) {
    throw new WFSException("Unknown output format " + outputFormat);
  }
 else   if (format.singleFile && request.getQueries().size() <= 1) {
    if (format.mimeType != null) {
      return format.mimeType;
    }
 else {
      return "application/octet-stream";
    }
  }
 else {
    return "application/zip";
  }
}
