{
  DataAccessManager def=buildLegacyAccessManager("wideOpen.properties");
  ResourceAccessManager defAsResourceManager=new DataAccessManagerAdapter(def);
  CatalogFilterAccessManager mgr=new CatalogFilterAccessManager();
  mgr.setCatalogFilters(Collections.singletonList(new LocalWorkspaceCatalogFilter()));
  mgr.setDelegate(defAsResourceManager);
  SecureCatalogImpl sc=new SecureCatalogImpl(catalog,mgr){
  }
;
  assertNotNull(sc.getLayerByName("topp:states"));
  WorkspaceInfo ws=sc.getWorkspaceByName("nurc");
  LocalWorkspace.set(ws);
  assertNull(sc.getWorkspaceByName("topp"));
  assertNull(sc.getResourceByName("topp:states",ResourceInfo.class));
  assertNull(sc.getLayerByName("topp:states"));
}
