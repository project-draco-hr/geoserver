{
  String url=(String)validatable.getValue();
  try {
    HTTPClient client=new SimpleHttpClient();
    usernamePanel.getFormComponent().processInput();
    String user=usernamePanel.getFormComponent().getInput();
    password.getFormComponent().processInput();
    String pwd=password.getFormComponent().getInput();
    if (user != null && user.length() > 0 && pwd != null && pwd.length() > 0) {
      client.setUser(user);
      client.setPassword(pwd);
    }
    WebMapServer server=new WebMapServer(new URL(url),client);
    server.getCapabilities();
  }
 catch (  Exception e) {
    error(validatable,"WMSCapabilitiesValidator.connectionFailure",Collections.singletonMap("error",e.getMessage()));
  }
}
