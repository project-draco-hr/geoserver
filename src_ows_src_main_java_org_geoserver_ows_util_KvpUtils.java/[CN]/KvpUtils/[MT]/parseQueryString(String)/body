{
  int index=path.indexOf('?');
  if (index == -1) {
    return Collections.EMPTY_MAP;
  }
  String queryString=path.substring(index + 1);
  StringTokenizer st=new StringTokenizer(queryString,"&");
  Map<String,String> result=new HashMap<String,String>();
  while (st.hasMoreTokens()) {
    String token=st.nextToken();
    String[] keyValuePair=token.split("=");
    if (keyValuePair.length > 1) {
      try {
        keyValuePair[1]=URLDecoder.decode(keyValuePair[1],"ISO-8859-1");
      }
 catch (      UnsupportedEncodingException e) {
        throw new RuntimeException("Totally unexpected... is your JVM busted?",e);
      }
    }
    result.put(keyValuePair[0],keyValuePair.length > 1 ? keyValuePair[1] : "");
  }
  return result;
}
