{
  if (kvp == null) {
    return null;
  }
  KvpMap normalizedKvp=new KvpMap();
  for (Iterator itr=kvp.entrySet().iterator(); itr.hasNext(); ) {
    Map.Entry entry=(Map.Entry)itr.next();
    String key=(String)entry.getKey();
    String value=null;
    if (entry.getValue() instanceof String) {
      value=(String)entry.getValue();
    }
 else     if (entry.getValue() instanceof String[]) {
      value=(String)((String[])entry.getValue())[0];
    }
    if (value != null) {
      value=value.trim();
    }
    normalizedKvp.put(key.toLowerCase(),value);
  }
  return normalizedKvp;
}
