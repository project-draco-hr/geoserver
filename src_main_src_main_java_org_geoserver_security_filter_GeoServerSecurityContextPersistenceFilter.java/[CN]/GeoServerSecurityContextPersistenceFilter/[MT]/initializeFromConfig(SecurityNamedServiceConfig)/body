{
  super.initializeFromConfig(config);
  SecurityContextPersistenceFilterConfig pConfig=(SecurityContextPersistenceFilterConfig)config;
  HttpSessionSecurityContextRepository repo=new HttpSessionSecurityContextRepository();
  SecurityContextPersistenceFilter filter=new SecurityContextPersistenceFilter(repo);
  repo.setAllowSessionCreation(pConfig.isAllowSessionCreation());
  filter.setForceEagerSessionCreation(false);
  try {
    filter.afterPropertiesSet();
  }
 catch (  ServletException e) {
    throw new RuntimeException(e);
  }
  getNestedFilters().add(filter);
}
