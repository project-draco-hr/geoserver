{
  Catalog cat=getCatalog();
  DataStoreInfo ds=cat.getFactory().createDataStore();
  ds.setName("foo");
  ds.setWorkspace(cat.getDefaultWorkspace());
  ds.setEnabled(true);
  Map params=ds.getConnectionParameters();
  params.put("dbtype","h2");
  params.put("database",getTestData().getDataDirectoryRoot().getAbsolutePath());
  cat.add(ds);
  FeatureSource fs1=getFeatureSource(SystemTestData.FIFTEEN);
  FeatureSource fs2=getFeatureSource(SystemTestData.SEVEN);
  DataStore store=(DataStore)ds.getDataStore(null);
  SimpleFeatureTypeBuilder tb=new SimpleFeatureTypeBuilder();
  tb.setName("bar");
  tb.add("name",String.class);
  tb.add("geom",Point.class);
  store.createSchema(tb.buildFeatureType());
  CatalogBuilder cb=new CatalogBuilder(cat);
  cb.setStore(ds);
  SimpleFeatureStore fs=(SimpleFeatureStore)store.getFeatureSource("bar");
  SimpleFeatureBuilder b=new SimpleFeatureBuilder(fs.getSchema());
  b.add("one");
  b.add(new WKTReader().read("POINT(1 1)"));
  DefaultFeatureCollection fc=new DefaultFeatureCollection();
  fc.add(b.buildFeature(null));
  fs.addFeatures(fc);
  FeatureTypeInfo ft=cb.buildFeatureType(fs);
  cat.add(ft);
  String xml="<wfs:Transaction service=\"WFS\" version=\"1.1.0\" " + " xmlns:wfs=\"http://www.opengis.net/wfs\" " + " xmlns:gml=\"http://www.opengis.net/gml\" "+ " xmlns:gs='" + SystemTestData.DEFAULT_URI + "'>"+ "<wfs:Insert idgen='UseExisting'>"+ " <gs:bar gml:id='bar.1234'>"+ "    <gs:name>acme</gs:name>"+ " </gs:bar>"+ "</wfs:Insert>"+ "</wfs:Transaction>";
  Document dom=postAsDOM("wfs",xml);
  assertEquals("wfs:TransactionResponse",dom.getDocumentElement().getNodeName());
  XMLAssert.assertXpathExists("//ogc:FeatureId[@fid = 'bar.1234']",dom);
  dom=getAsDOM("wfs?request=GetFeature&version=1.1.0&service=wfs&featureId=bar.1234");
  print(dom);
  XMLAssert.assertXpathExists("//gs:bar[@gml:id = 'bar.1234']",dom);
}
