{
  Assert.notNull(latLonBbox);
  Assert.notNull(latLonBbox.getCoordinateReferenceSystem());
  Assert.notNull(srs);
  final double minX=latLonBbox.getMinX();
  final double minY=latLonBbox.getMinY();
  final double maxX=latLonBbox.getMaxX();
  final double maxY=latLonBbox.getMaxY();
  final String epsgCode=srs.toString();
  final boolean longitudeFirst=true;
  ReferencedEnvelope transformedBounds;
  BoundingBox bounds;
  if ("EPSG:900913".equals(epsgCode) || "EPSG:3857".equals(epsgCode)) {
    bounds=new BoundingBox(longToSphericalMercatorX(minX),latToSphericalMercatorY(minY),longToSphericalMercatorX(maxX),latToSphericalMercatorY(maxY));
  }
 else {
    try {
      CoordinateReferenceSystem crs;
      crs=CRS.decode(epsgCode,longitudeFirst);
      Assert.notNull(crs);
      transformedBounds=latLonBbox.transform(crs,true,20);
    }
 catch (    NoSuchAuthorityCodeException e) {
      throw new RuntimeException(e);
    }
catch (    FactoryException e) {
      throw new RuntimeException(e);
    }
catch (    TransformException e) {
      throw new RuntimeException(e);
    }
    bounds=new BoundingBox(transformedBounds.getMinX(),transformedBounds.getMinY(),transformedBounds.getMaxX(),transformedBounds.getMaxY());
  }
  return bounds;
}
