{
  String configProp=initParameters.getProperty("config");
  try {
    File dir=GeoserverDataDirectory.findCreateConfigDir("printing");
    File qualifiedConfig=new File(dir,configProp);
    if (!qualifiedConfig.exists()) {
      InputStream conf=getClass().getResourceAsStream("default-config.yaml");
      IOUtils.copy(conf,qualifiedConfig);
    }
    if (!qualifiedConfig.canRead()) {
      LOG.warning("Printing module missing its configuration.  Any actions it takes will fail.");
      return;
    }
    initParameters.setProperty("config",qualifiedConfig.getCanonicalPath());
  }
 catch (  org.vfny.geoserver.global.ConfigurationException e) {
    LOG.warning("Explosion while attempting to access/create config directory for MapFish " + "printing module.  Module will fail when run. Config exception is: " + e);
  }
catch (  java.io.IOException e) {
    LOG.warning("Explosion while calculating canonical path for MapFish printing servlet. " + "Module will fail when run.  IO Exception is: " + e);
  }
  super.setInitParameters(initParameters);
}
