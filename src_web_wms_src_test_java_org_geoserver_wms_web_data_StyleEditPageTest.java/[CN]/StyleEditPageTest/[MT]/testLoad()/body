{
  tester.assertRenderedPage(StyleEditPage.class);
  tester.assertNoErrorMessage();
  tester.debugComponentTrees();
  tester.assertComponent("form:name",TextField.class);
  tester.assertComponent("form:styleEditor:editorContainer:editorParent:editor",TextArea.class);
  tester.executeAjaxEvent("form:legendPanel:container:showhide:show","click");
  tester.assertComponent("form:legendPanel",ExternalGraphicPanel.class);
  tester.assertComponent("form:legendPanel:container:list:onlineResource",TextField.class);
  tester.assertComponent("form:legendPanel:container:list:width",TextField.class);
  tester.assertComponent("form:legendPanel:container:list:height",TextField.class);
  tester.assertComponent("form:legendPanel:container:list:format",TextField.class);
  tester.assertModelValue("form:name","Buildings");
  GeoServerResourceLoader loader=GeoServerExtensions.bean(GeoServerResourceLoader.class);
  assertNotNull(loader);
  String path=Paths.path("styles",Paths.convert(buildingsStyle.getFilename()));
  Resource styleFile=loader.get(path);
  DocumentBuilder db=DocumentBuilderFactory.newInstance().newDocumentBuilder();
  Document d1=db.parse(styleFile.in());
  String xml=tester.getComponentFromLastRenderedPage("form:styleEditor").getDefaultModelObjectAsString();
  xml=xml.replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;","\"");
  Document d2=db.parse(new ByteArrayInputStream(xml.getBytes()));
  assertXMLEqual(d1,d2);
}
