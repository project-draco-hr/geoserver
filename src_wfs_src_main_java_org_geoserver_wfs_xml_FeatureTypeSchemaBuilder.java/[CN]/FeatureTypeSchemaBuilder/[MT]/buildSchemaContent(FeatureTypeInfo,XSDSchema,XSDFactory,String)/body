{
  if (!findTypeInSchema(featureTypeMeta,schema,factory)) {
    XSDComplexTypeDefinition xsdComplexType=buildComplexSchemaContent(featureTypeMeta.getFeatureType(),schema,factory);
    XSDElementDeclaration element=factory.createXSDElementDeclaration();
    element.setName(featureTypeMeta.getName());
    element.setTargetNamespace(featureTypeMeta.getNamespace().getURI());
synchronized (Schemas.class) {
      element.setSubstitutionGroupAffiliation(getFeatureElement());
    }
    element.setTypeDefinition(xsdComplexType);
    schema.getContents().add(element);
    schema.updateElement();
  }
}
