{
  InputStream is=null;
  OutputStream os=null;
  byte[] buffer=new byte[4096];
  int read;
  try {
    if (scope == null) {
      is=Thread.currentThread().getContextClassLoader().getResourceAsStream(resource);
    }
 else {
      is=scope.getResourceAsStream(resource);
    }
    os=new FileOutputStream(target);
    while ((read=is.read(buffer)) > 0)     os.write(buffer,0,read);
  }
 catch (  FileNotFoundException targetException) {
    throw new IOException("Can't write to file " + target.getAbsolutePath() + ". Check write permissions on target folder for user "+ System.getProperty("user.name"));
  }
catch (  IOException e) {
    LOGGER.log(Level.WARNING,"Error trying to copy logging configuration file",e);
  }
 finally {
    try {
      if (is != null) {
        is.close();
      }
      if (os != null) {
        os.close();
      }
    }
 catch (    IOException e) {
    }
  }
}
