{
  GeoServerResourceLoader resources=GeoServerExtensions.bean(GeoServerResourceLoader.class);
  assertSame(catalog.getResourceLoader(),resources);
  loader.readCatalog(catalog,xp);
  assertNotNull(catalog.getLayerGroupByName("topp","simplegroup"));
  LayerGroupInfo nestedLayerGroup=catalog.getLayerGroupByName("topp","nestedgroup");
  assertNotNull(nestedLayerGroup);
  assertNotNull(nestedLayerGroup.getLayers());
  assertEquals(2,nestedLayerGroup.getLayers().size());
  assertTrue(nestedLayerGroup.getLayers().get(0) instanceof LayerGroupInfo);
  assertNotNull(((LayerGroupInfo)nestedLayerGroup.getLayers().get(0)).getLayers());
  assertTrue(nestedLayerGroup.getLayers().get(1) instanceof LayerInfo);
}
