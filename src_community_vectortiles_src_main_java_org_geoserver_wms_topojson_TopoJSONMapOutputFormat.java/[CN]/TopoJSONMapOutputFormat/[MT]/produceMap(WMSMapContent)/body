{
  Topology topology=new Topology();
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  TopoJSONEncoder encoder=new TopoJSONEncoder();
  Writer writer=new OutputStreamWriter(out,Charsets.UTF_8);
  encoder.encode(topology,writer);
  writer.flush();
  byte[] mapContents=out.toByteArray();
  RawMap map=new RawMap(mapContent,mapContents,MIME_TYPE);
  map.setResponseHeader("Content-Length",String.valueOf(mapContents.length));
  return map;
}
