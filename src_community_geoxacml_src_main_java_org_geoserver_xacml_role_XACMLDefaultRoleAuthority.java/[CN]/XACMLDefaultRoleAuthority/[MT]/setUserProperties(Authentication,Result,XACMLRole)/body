{
  if (role.isRoleAttributesProcessed())   return;
  if (auth.getPrincipal() == null || auth.getPrincipal() instanceof String) {
    role.setRoleAttributesProcessed(true);
    return;
  }
  for (  Obligation obligation : result.getObligations()) {
    if (XACMLConstants.UserPropertyObligationId.equals(obligation.getId().toString()))     setRoleParamsFromUserDetails(auth,obligation,role);
    if (XACMLConstants.RoleConstantObligationId.equals(obligation.getId().toString()))     setRoleParamsFromConstants(obligation,role);
  }
  role.setRoleAttributesProcessed(true);
}
