{
  BeanInfo bi=null;
  try {
    bi=Introspector.getBeanInfo(auth.getPrincipal().getClass());
  }
 catch (  IntrospectionException e) {
    throw new RuntimeException(e);
  }
  for (  Attribute attr : obligation.getAssignments()) {
    String propertyName=((StringAttribute)attr.getValue()).getValue();
    for (    PropertyDescriptor pd : bi.getPropertyDescriptors()) {
      if (pd.getName().equals(propertyName)) {
        Serializable value=null;
        try {
          Object tmp=pd.getReadMethod().invoke(auth.getPrincipal(),new Object[0]);
          if (tmp == null)           continue;
          if (tmp instanceof Serializable == false) {
            throw new RuntimeException("Role params must be serializable, " + tmp.getClass() + " is not");
          }
          value=(Serializable)tmp;
        }
 catch (        Exception e) {
          throw new RuntimeException(e);
        }
        if (value instanceof Geometry) {
          if (((Geometry)value).getUserData() == null)           throw new RuntimeException("Property: " + propertyName + " : Geometry must have srs name as userdata");
        }
        AttributeValue attrValue=createAttributeValueFromObject(value);
        Attribute xacmlAttr=new Attribute(attr.getId(),null,null,attrValue);
        role.getAttributes().add(xacmlAttr);
      }
    }
  }
}
