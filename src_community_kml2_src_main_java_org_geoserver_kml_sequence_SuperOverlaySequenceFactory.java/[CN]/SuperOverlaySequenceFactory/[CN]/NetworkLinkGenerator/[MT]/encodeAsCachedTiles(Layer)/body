{
  NetworkLink nl=new NetworkLink();
  String prefixedName=layer.getTitle();
  nl.setName("GWC-" + prefixedName);
  Link link=nl.createAndSetLink();
  String type=(layer instanceof RasterLayer) ? "png" : "kml";
  String url=ResponseUtils.buildURL(context.getRequest().getBaseUrl(),"gwc/service/kml/" + prefixedName + "."+ type+ ".kml",null,URLType.SERVICE);
  link.setHref(url);
  link.setViewRefreshMode(ViewRefreshMode.NEVER);
  return nl;
}
