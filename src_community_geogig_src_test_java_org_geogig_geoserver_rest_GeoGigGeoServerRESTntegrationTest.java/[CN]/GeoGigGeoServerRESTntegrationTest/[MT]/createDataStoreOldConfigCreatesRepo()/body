{
  File targetDirectory=new File(geogigData.tmpFolder().getRoot(),"old_config_new_repo");
  final String repository=targetDirectory.getAbsolutePath();
  String message="<dataStore>\n" + " <name>repo_old_config_new_repo</name>\n" + " <type>GeoGIG</type>\n"+ " <connectionParameters>\n"+ "   <entry key=\"geogig_repository\">${repository}</entry>\n"+ "   <entry key=\"create\">true</entry>\n"+ " </connectionParameters>\n"+ "</dataStore>\n";
  message=message.replace("${repository}",repository);
  Catalog catalog=getCatalog();
  final String uri="/rest/workspaces/gigws/datastores";
  MockHttpServletResponse response=postAsServletResponse(uri,message,"text/xml");
  assertEquals(201,response.getStatus());
  String locationHeader=response.getHeader("Location");
  assertNotNull(locationHeader);
  assertTrue(locationHeader.endsWith("/workspaces/gigws/datastores/repo_old_config_new_repo"));
  assertTrue(targetDirectory.exists());
  DataStoreInfo newDataStore=catalog.getDataStoreByName("repo_old_config_new_repo");
  assertNotNull(newDataStore);
  DataStore ds=(DataStore)newDataStore.getDataStore(null);
  assertNotNull(ds);
  checkNewConfig(newDataStore);
}
