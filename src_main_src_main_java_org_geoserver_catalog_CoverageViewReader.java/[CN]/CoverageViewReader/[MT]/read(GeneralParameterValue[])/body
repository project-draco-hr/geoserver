{
  List<CoverageBand> bands=coverageView.getCoverageBands();
  List<GridCoverage2D> coverages=new ArrayList<GridCoverage2D>();
  List<SampleDimension> dims=new ArrayList<SampleDimension>();
  CoveragesConsistencyChecker checker=null;
  for (  CoverageBand band : bands) {
    final InputCoverageBand inputBand=band.getInputCoverageBands().get(0);
    final String coverageName=inputBand.getCoverageName();
    final GridCoverage2DReader reader=wrap(delegate,coverageName,coverageInfo);
    if (checker == null) {
      checker=new CoveragesConsistencyChecker(reader);
    }
 else {
      checker.checkConsistency(reader);
    }
    GridCoverage2D coverage=(GridCoverage2D)reader.read(parameters);
    if (coverage != null) {
      String selectedBand=inputBand.getBand();
      final ParameterValueGroup param=PROCESSOR.getOperation("SelectSampleDimension").getParameters();
      param.parameter("Source").setValue(coverage);
      param.parameter("SampleDimensions").setValue(new int[]{Integer.valueOf(selectedBand)});
      coverage=(GridCoverage2D)PROCESSOR.doOperation(param,hints);
      coverages.add(coverage);
      dims.addAll(Arrays.asList(coverage.getSampleDimensions()));
    }
  }
  if (coverages.isEmpty()) {
    return null;
  }
  GridCoverage2D sampleCoverage=coverages.get(0);
  RenderedImage image=null;
  Map properties=null;
  if (coverages.size() > 1) {
    final ParameterValueGroup param=PROCESSOR.getOperation("BandMerge").getParameters();
    param.parameter("sources").setValue(coverages);
    GridCoverage2D merge=(GridCoverage2D)PROCESSOR.doOperation(param,hints);
    image=merge.getRenderedImage();
    properties=merge.getProperties();
  }
 else {
    properties=sampleCoverage.getProperties();
    image=sampleCoverage.getRenderedImage();
  }
  GridSampleDimension[] sampleDimensions=dims.toArray(new GridSampleDimension[dims.size()]);
  GridCoverage2D mergedCoverage=coverageFactory.create(coverageInfo.getName(),image,sampleCoverage.getGridGeometry(),sampleDimensions,null,properties);
  return new GridCoverageWrapper(coverageInfo.getName(),mergedCoverage,sampleDimensions,mergedCoverage.getProperties());
}
