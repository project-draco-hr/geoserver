{
  KMLTransformer transformer=new KMLTransformer(getWMS());
  mapContext.removeLayer(mapContext.getLayer(0));
  mapContext.addLayer(createMapLayer(MockData.BASIC_POLYGONS,"allsymbolizers"));
  mapContext.setAreaOfInterest(new ReferencedEnvelope(-180,0,-90,90,DefaultGeographicCRS.WGS84));
  mapContext.setMapHeight(256);
  mapContext.setMapWidth(256);
  Document document=WMSTestSupport.transform(mapContext,transformer,false);
  assertEquals("kml",document.getDocumentElement().getNodeName());
  assertEquals(3,document.getElementsByTagName("Style").getLength());
  XMLAssert.assertXpathEvaluatesTo("0","count(//Style[1]/IconStyle/Icon/color)",document);
  XMLAssert.assertXpathEvaluatesTo("http://maps.google.com/mapfiles/kml/pal4/icon25.png","//Style[1]/IconStyle/Icon/href",document);
  XMLAssert.assertXpathEvaluatesTo("b24d4dff","//Style[1]/PolyStyle/color",document);
  XMLAssert.assertXpathEvaluatesTo("1","//Style[1]/PolyStyle/outline",document);
  XMLAssert.assertXpathEvaluatesTo("ffba3e00","//Style[1]/LineStyle/color",document);
}
