{
  try {
    Map<String,Double> denominators=CapabilityUtil.searchMinMaxScaleDenominator(MIN_DENOMINATOR_ATTR,MAX_DENOMINATOR_ATTR,layer);
    if ((denominators.get(MIN_DENOMINATOR_ATTR) == 0.0) && (denominators.get(MAX_DENOMINATOR_ATTR) == Double.POSITIVE_INFINITY)) {
      return;
    }
    Double minScaleHint;
    Double maxScaleHint;
    if (wmsConfig.getScalehintUnitPixel() != null && wmsConfig.getScalehintUnitPixel()) {
      minScaleHint=CapabilityUtil.computeScaleHint(denominators.get(MIN_DENOMINATOR_ATTR));
      maxScaleHint=CapabilityUtil.computeScaleHint(denominators.get(MAX_DENOMINATOR_ATTR));
    }
 else {
      minScaleHint=denominators.get(MIN_DENOMINATOR_ATTR);
      maxScaleHint=denominators.get(MAX_DENOMINATOR_ATTR);
    }
    AttributesImpl attrs=new AttributesImpl();
    attrs.addAttribute("",MIN_DENOMINATOR_ATTR,MIN_DENOMINATOR_ATTR,"",String.valueOf(minScaleHint));
    attrs.addAttribute("",MAX_DENOMINATOR_ATTR,MAX_DENOMINATOR_ATTR,"",String.valueOf(maxScaleHint));
    element("ScaleHint",null,attrs);
  }
 catch (  IOException e) {
    LOGGER.log(Level.WARNING,e.getLocalizedMessage(),e);
  }
}
