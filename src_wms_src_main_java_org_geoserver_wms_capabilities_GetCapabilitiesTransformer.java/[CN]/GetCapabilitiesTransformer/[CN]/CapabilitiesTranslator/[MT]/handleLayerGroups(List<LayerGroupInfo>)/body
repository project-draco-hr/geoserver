{
  Set<LayerInfo> layersAlreadyProcessed=new HashSet<LayerInfo>();
  if (layerGroups == null || layerGroups.size() == 0) {
    return layersAlreadyProcessed;
  }
  List<LayerGroupInfo> topLevelGropus=filterNestedGroups(layerGroups);
  for (  LayerGroupInfo layerGroup : topLevelGropus) {
    handleLayerGroup(layerGroup,layersAlreadyProcessed);
  }
  return layersAlreadyProcessed;
}
