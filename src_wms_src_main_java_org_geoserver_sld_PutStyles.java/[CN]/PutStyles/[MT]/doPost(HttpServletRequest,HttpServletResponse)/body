{
  LOGGER.fine("PutStyles POST");
  File temp=null;
  try {
    Reader requestXml=new BufferedReader(XmlCharsetDetector.getCharsetAwareReader(request.getInputStream()));
    temp=File.createTempFile("putStylesPost","xml");
    FileOutputStream fos=new FileOutputStream(temp);
    BufferedOutputStream out=new BufferedOutputStream(fos);
    StringBuffer sb=new StringBuffer();
    if (requestXml == null) {
      throw new NullPointerException();
    }
    int c;
    while (-1 != (c=requestXml.read())) {
      char chr=(char)c;
      out.write(c);
      sb.append(chr);
    }
    requestXml.close();
    out.flush();
    out.close();
    requestXml=new BufferedReader(new FileReader(temp));
    PutStylesRequest serviceRequest=new PutStylesRequest((WMS)getServiceRef());
    serviceRequest.setSldBody(sb.toString());
    ServletContext context=request.getSession().getServletContext();
    processSLD(serviceRequest,request,response,context);
  }
 catch (  SldException e) {
    throw new ServletException(e);
  }
catch (  IOException e) {
    throw new ServletException(e);
  }
 finally {
    if (temp != null)     temp.delete();
  }
}
