{
  if (extensions == null || extensions.size() == 0 || !extensions.containsKey(subsettingCRS ? "subsettingCrs" : "outputCrs")) {
    return coverage.getCoordinateReferenceSystem2D();
  }
  final ExtensionItemType extensionItem=extensions.get(subsettingCRS ? "subsettingCrs" : "outputCrs");
  if (extensionItem.getName().equals(subsettingCRS ? "subsettingCrs" : "outputCrs")) {
    String crsName=extensionItem.getSimpleContent();
    if (crsName == null) {
      throw new WCS20Exception(subsettingCRS ? "Subsetting" : "Output" + " CRS was null",WCS20ExceptionCode.NotACrs,"null");
    }
    final int lastSlash=crsName.lastIndexOf("/");
    if (lastSlash < 0) {
      throw new WCS20Exception("Invalid " + (subsettingCRS ? "subsetting" : "output") + " CRS",WCS20Exception.WCS20ExceptionCode.NotACrs,crsName);
    }
    crsName=crsName.substring(lastSlash + 1,crsName.length());
    try {
      return CRS.decode("EPSG:" + crsName,false);
    }
 catch (    Exception e) {
      final WCS20Exception exception=new WCS20Exception("Invalid " + (subsettingCRS ? "subsetting" : "output") + " CRS",WCS20Exception.WCS20ExceptionCode.NotACrs,crsName);
      exception.initCause(e);
      throw exception;
    }
  }
  return coverage.getCoordinateReferenceSystem2D();
}
