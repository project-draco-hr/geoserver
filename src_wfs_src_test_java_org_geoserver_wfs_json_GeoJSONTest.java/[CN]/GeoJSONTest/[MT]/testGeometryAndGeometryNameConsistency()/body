{
  JSONObject collection=(JSONObject)getAsJSON("wfs?request=GetFeature&version=1.0.0&typename=" + getLayerId(MULTI_GEOMETRIES_WITH_NULL) + "&outputformat="+ JSONType.json);
  print(collection);
  assertEquals(3,collection.getInt("totalFeatures"));
  JSONArray features=collection.getJSONArray("features");
  assertEquals(3,features.size());
  JSONObject feature=features.getJSONObject(0);
  assertEquals("MultiGeometriesWithNull.0",feature.getString("id"));
  assertEquals("All geometries present, first geometry must be default","geom_a",feature.getString("geometry_name"));
  JSONObject geometry=feature.getJSONObject("geometry");
  JSONArray coords=geometry.getJSONArray("coordinates");
  assertEquals("geom_a has coodinate 1",1,coords.getInt(0));
  JSONObject properties=feature.getJSONObject("properties");
  assertFalse("geom_a must not be present, its the default geom",properties.containsKey("geom_a"));
  JSONObject propertyGeomB=properties.getJSONObject("geom_b");
  coords=propertyGeomB.getJSONArray("coordinates");
  assertEquals("geom_b has coodinate 2",2,coords.getInt(0));
  JSONObject propertyGeomC=properties.getJSONObject("geom_c");
  coords=propertyGeomC.getJSONArray("coordinates");
  assertEquals("geom_c has coodinate 3",3,coords.getInt(0));
  feature=features.getJSONObject(1);
  assertEquals("MultiGeometriesWithNull.1",feature.getString("id"));
  assertEquals("1st geometry null, still default","geom_a",feature.getString("geometry_name"));
  geometry=feature.getJSONObject("geometry");
  assertTrue(geometry.isNullObject());
  properties=feature.getJSONObject("properties");
  assertFalse("geom_a must not be present, its the default geom",properties.containsKey("geom_a"));
  propertyGeomB=properties.getJSONObject("geom_b");
  coords=propertyGeomB.getJSONArray("coordinates");
  assertEquals("geom_b has coodinate 2",2,coords.getInt(0));
  propertyGeomC=properties.getJSONObject("geom_c");
  coords=propertyGeomC.getJSONArray("coordinates");
  assertEquals("geom_c has coodinate 3",3,coords.getInt(0));
  feature=features.getJSONObject(2);
  assertEquals("MultiGeometriesWithNull.2",feature.getString("id"));
  assertEquals("no geometries present, 1st still default","geom_a",feature.getString("geometry_name"));
  geometry=feature.getJSONObject("geometry");
  assertTrue(geometry.isNullObject());
  properties=feature.getJSONObject("properties");
  assertFalse("geom_a must not be present, its the default geom",properties.containsKey("geom_a"));
  propertyGeomB=properties.getJSONObject("geom_b");
  assertTrue(propertyGeomB.isNullObject());
  propertyGeomC=properties.getJSONObject("geom_c");
  assertTrue(propertyGeomC.isNullObject());
}
