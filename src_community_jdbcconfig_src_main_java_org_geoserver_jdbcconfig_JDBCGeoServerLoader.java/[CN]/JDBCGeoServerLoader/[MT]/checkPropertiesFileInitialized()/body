{
  File propsFile=new File(getBaseDir(),CONFIG_FILE);
  final boolean previouslyConfigured=propsFile.exists();
  if (!previouslyConfigured) {
    copyScripts();
    createDefaultConfig(propsFile);
  }
  Properties configProps=new Properties();
  FileInputStream stream=new FileInputStream(propsFile);
  try {
    configProps.load(stream);
  }
  finally {
    stream.close();
  }
  final boolean importCatalog=Boolean.parseBoolean(configProps.getProperty("importCatalog","false"));
  final boolean runInitScript=Boolean.parseBoolean(configProps.getProperty("runInitScript","false"));
  final String initScript=configProps.getProperty("initScript");
  if (runInitScript) {
    File file=new File(initScript);
    Preconditions.checkState(file.exists(),"Init script does not exist: " + file.getAbsolutePath());
    this.initScript=file.toURI().toURL();
    configProps.put("importCatalog","false");
    configProps.put("runInitScript","false");
    OutputStream out=new FileOutputStream(propsFile);
    try {
      configProps.store(new OutputStreamWriter(out,"UTF-8"),"");
    }
  finally {
      out.close();
    }
  }
  return importCatalog;
}
