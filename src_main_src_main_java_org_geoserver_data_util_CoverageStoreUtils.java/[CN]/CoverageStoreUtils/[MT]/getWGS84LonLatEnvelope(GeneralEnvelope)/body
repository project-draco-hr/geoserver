{
  final CoordinateReferenceSystem sourceCRS=envelope.getCoordinateReferenceSystem();
  if (CRS.equalsIgnoreMetadata(sourceCRS,DefaultGeographicCRS.WGS84)) {
    return new GeneralEnvelope(envelope);
  }
  final CoordinateReferenceSystem targetCRS=DefaultGeographicCRS.WGS84;
  final MathTransform mathTransform=CRS.findMathTransform(sourceCRS,targetCRS,true);
  final GeneralEnvelope targetEnvelope;
  if (!mathTransform.isIdentity()) {
    targetEnvelope=CRS.transform(mathTransform,envelope);
  }
 else {
    targetEnvelope=new GeneralEnvelope(envelope);
  }
  targetEnvelope.setCoordinateReferenceSystem(targetCRS);
  return targetEnvelope;
}
