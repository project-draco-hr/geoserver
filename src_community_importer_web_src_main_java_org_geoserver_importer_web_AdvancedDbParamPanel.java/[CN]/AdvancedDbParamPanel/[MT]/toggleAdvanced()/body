{
  final AjaxLink advanced=new AjaxLink("advancedLink"){
    @Override public void onClick(    AjaxRequestTarget target){
      advancedPanel.setVisible(!advancedPanel.isVisible());
      target.addComponent(advancedContainer);
      target.addComponent(this);
    }
  }
;
  advanced.add(new AttributeModifier("class",true,new AbstractReadOnlyModel(){
    @Override public Object getObject(){
      return advancedPanel.isVisible() ? "expanded" : "collapsed";
    }
  }
));
  advanced.setOutputMarkupId(true);
  return advanced;
}
