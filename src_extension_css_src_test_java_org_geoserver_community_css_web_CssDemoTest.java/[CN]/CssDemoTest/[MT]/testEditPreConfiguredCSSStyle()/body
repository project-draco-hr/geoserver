{
  Catalog cat=getCatalog();
  StyleInfo foo=cat.getFactory().createStyle();
  foo.setName("foo");
  foo.setFilename("foo.css");
  foo.setFormat(CssHandler.FORMAT);
  String css="* { fill: #cccccc }";
  cat.getResourcePool().writeStyle(foo,new ByteArrayInputStream(css.getBytes()));
  cat.add(foo);
  login();
  PageParameters pp=new PageParameters();
  String prefixedName=getLayerId(MockData.BASIC_POLYGONS);
  pp.put("layer",prefixedName);
  pp.put("style","foo");
  tester.startPage(CssDemoPage.class,pp);
  tester.assertRenderedPage(CssDemoPage.class);
  tester.assertModelValue("main-content:change.style:link:label","foo");
  tester.assertModelValue("main-content:change.layer:link:label",prefixedName);
  FormTester form=tester.newFormTester("main-content:style.editing:style-editor");
  form.setValue("editor:editorContainer:editorParent:editor","* { stroke: red; }");
  tester.executeAjaxEvent("main-content:style.editing:style-editor:submit","onclick");
  BufferedReader reader=cat.getResourcePool().readStyle(foo);
  String content=IOUtils.toString(reader);
  reader.close();
  assertEquals("* { stroke: red; }",content);
}
