{
  List<LayerGroupInfo> layerGroups=new ArrayList<LayerGroupInfo>();
  for (  LayerGroupInfo layerGroup : getLayerGroups()) {
    LayerGroupHelper helper=new LayerGroupHelper(layerGroup);
    final Iterator<LayerInfo> groupLayers=helper.allLayers().iterator();
    final Iterator<StyleInfo> explicitLayerGroupStyles=helper.allStyles().iterator();
    while (groupLayers.hasNext()) {
      LayerInfo childLayer=groupLayers.next();
      StyleInfo assignedLayerStyle=explicitLayerGroupStyles.next();
      if (assignedLayerStyle == null) {
        assignedLayerStyle=childLayer.getDefaultStyle();
      }
      if (style.equals(assignedLayerStyle)) {
        layerGroups.add(layerGroup);
        break;
      }
    }
  }
  return layerGroups;
}
