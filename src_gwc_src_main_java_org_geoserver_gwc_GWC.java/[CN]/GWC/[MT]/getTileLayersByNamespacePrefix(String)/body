{
  if (nsPrefix == null) {
    return getTileLayers();
  }
  final Catalog catalog=getCatalog();
  final NamespaceInfo namespaceFilter=catalog.getNamespaceByPrefix(nsPrefix);
  if (namespaceFilter == null) {
    return getTileLayers();
  }
  List<TileLayer> filteredLayers=new ArrayList<TileLayer>();
  NamespaceInfo layerNamespace;
  String layerName;
  for (  TileLayer tileLayer : getTileLayers()) {
    layerName=tileLayer.getName();
    LayerInfo layerInfo=catalog.getLayerByName(layerName);
    if (layerInfo != null) {
      layerNamespace=layerInfo.getResource().getNamespace();
      if (namespaceFilter.equals(layerNamespace)) {
        filteredLayers.add(tileLayer);
      }
    }
  }
  return filteredLayers;
}
