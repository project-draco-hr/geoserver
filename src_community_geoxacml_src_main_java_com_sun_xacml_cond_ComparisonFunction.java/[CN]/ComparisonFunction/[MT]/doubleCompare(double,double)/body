{
  if (d1 == d2) {
    if (d1 != 0)     return 0;
    return Double.toString(d1).compareTo(Double.toString(d2));
  }
  if (Double.isNaN(d1)) {
    if (Double.isNaN(d2)) {
      return 0;
    }
 else {
      return 1;
    }
  }
  if (Double.isNaN(d2)) {
    return -1;
  }
  return ((d1 > d2) ? 1 : -1);
}
