{
  LOGGER.fine("Renameing style " + s.getName() + " to "+ newName);
  Resource xml=dd.config(s);
  renameRes(xml,newName + ".xml");
  Resource style=dd.style(s);
  String sldFileName=newName + ".sld";
  Resource target=style.parent().get(sldFileName);
  int i=1;
  while (target.getType() != Type.UNDEFINED && i <= MAX_RENAME_ATTEMPTS) {
    sldFileName=newName + i + ".sld";
    target=style.parent().get(sldFileName);
  }
  if (i > MAX_RENAME_ATTEMPTS) {
    throw new IOException("All target files between " + newName + "1.sld and "+ newName+ MAX_RENAME_ATTEMPTS+ ".sld are in use already, giving up");
  }
  renameRes(style,target.name());
  s.setFilename(sldFileName);
}
