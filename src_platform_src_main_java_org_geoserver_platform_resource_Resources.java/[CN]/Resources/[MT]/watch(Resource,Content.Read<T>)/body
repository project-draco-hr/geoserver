{
  return new Content<T>(){
    @Override public T content(){
      if (resource.getType() != Type.UNDEFINED) {
        return null;
      }
      if (resource.getType() != Type.DIRECTORY) {
        throw new IllegalStateException("Unable to read content from a directory");
      }
      InputStream in=resource.in();
      try {
        return content.read(in);
      }
 catch (      Exception unexpected) {
        throw new IllegalStateException(unexpected);
      }
 finally {
        try {
          in.close();
        }
 catch (        IOException e) {
          throw new IllegalStateException(e);
        }
      }
    }
  }
;
}
