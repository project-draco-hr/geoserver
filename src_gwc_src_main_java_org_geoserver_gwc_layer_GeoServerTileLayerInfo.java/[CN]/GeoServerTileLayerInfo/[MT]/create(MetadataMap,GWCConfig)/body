{
  GeoServerTileLayerInfo info=new GeoServerTileLayerInfo();
  boolean dirty=false;
  boolean enabled=defaults.isCacheLayersByDefault();
  if (metadataMap.containsKey(CONFIG_KEY_ENABLED)) {
    enabled=metadataMap.get(CONFIG_KEY_ENABLED,Boolean.class).booleanValue();
  }
 else {
    dirty=true;
  }
  info.setEnabled(enabled);
  info.setGutter(defaults.getGutter());
  if (metadataMap.containsKey(CONFIG_KEY_GUTTER)) {
    int gutter=metadataMap.get(CONFIG_KEY_GUTTER,Integer.class).intValue();
    info.setGutter(gutter);
  }
 else {
    dirty=true;
  }
  info.setCachedGridSetIds(defaults.getDefaultCachingGridSetIds());
  if (metadataMap.containsKey(CONFIG_KEY_GRIDSETS)) {
    String gridsets=metadataMap.get(CONFIG_KEY_GRIDSETS,String.class);
    Set<String> gridSetIds=unmarshalSet(gridsets);
    info.setCachedGridSetIds(gridSetIds);
  }
 else {
    dirty=true;
  }
  info.setMetaTilingX(defaults.getMetaTilingX());
  info.setMetaTilingY(defaults.getMetaTilingY());
  if (metadataMap.containsKey(CONFIG_KEY_METATILING_X)) {
    info.setMetaTilingX(metadataMap.get(CONFIG_KEY_METATILING_X,Integer.class).intValue());
  }
 else {
    dirty=true;
  }
  if (metadataMap.containsKey(CONFIG_KEY_METATILING_Y)) {
    info.setMetaTilingY(metadataMap.get(CONFIG_KEY_METATILING_Y,Integer.class).intValue());
  }
 else {
    dirty=true;
  }
  info.setDirty(dirty);
  return info;
}
