{
  LayerInfo browseLayer=createEoMosaicLayer(ws,browseLayerName,EoLayerType.EO_PRODUCT,browseImageUrl);
  LayerInfo bandsLayer=createEoMosaicLayer(ws,bandsLayerName,EoLayerType.BAND_COVERAGE,bandsUrl);
  LayerInfo masksLayer=createEoMosaicLayer(ws,masksLayerName,EoLayerType.BITMASK,masksUrl);
  LayerInfo paramsLayer=createEoMosaicLayer(ws,parametersLayerName,EoLayerType.GEOPHYSICAL_PARAMETER,parametersUrl);
  LayerInfo outlineLayer;
  try {
    outlineLayer=createEoOutlineLayer(bandsUrl,ws,outlineLayerName);
  }
 catch (  RuntimeException e) {
    throw new IllegalArgumentException("The layer '" + outlineLayerName + "' could not be created. Failure message: "+ e.getMessage(),e);
  }
catch (  Exception e) {
    throw new IllegalArgumentException("The layer '" + outlineLayerName + "' could not be created. Failure message: "+ e.getMessage(),e);
  }
  LayerGroupInfo layerGroup=catalog.getFactory().createLayerGroup();
  layerGroup.setWorkspace(ws);
  layerGroup.setName(groupName);
  layerGroup.setMode(LayerGroupInfo.Mode.EO);
  layerGroup.setRootLayer(browseLayer);
  layerGroup.setRootLayerStyle(browseLayer.getDefaultStyle());
  layerGroup.getLayers().add(outlineLayer);
  layerGroup.getStyles().add(outlineLayer.getDefaultStyle());
  layerGroup.getLayers().add(bandsLayer);
  layerGroup.getStyles().add(bandsLayer.getDefaultStyle());
  if (masksLayer != null) {
    layerGroup.getLayers().add(masksLayer);
    layerGroup.getStyles().add(masksLayer.getDefaultStyle());
  }
  if (paramsLayer != null) {
    layerGroup.getLayers().add(paramsLayer);
    layerGroup.getStyles().add(paramsLayer.getDefaultStyle());
  }
  try {
    CatalogBuilder builder=new CatalogBuilder(catalog);
    builder.calculateLayerGroupBounds(layerGroup);
    catalog.add(layerGroup);
    return layerGroup;
  }
 catch (  RuntimeException e) {
    throw new IllegalArgumentException("The layer group '" + groupName + "' could not be created. Failure message: "+ e.getMessage(),e);
  }
catch (  Exception e) {
    throw new IllegalArgumentException("The layer group '" + groupName + "' could not be created. Failure message: "+ e.getMessage(),e);
  }
}
