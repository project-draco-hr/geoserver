{
  if (StringUtils.isEmpty(url)) {
    return null;
  }
  CoverageStoreInfo store=createEoMosaicStore(ws,name,url);
  CatalogBuilder builder=new CatalogBuilder(catalog);
  builder.setStore(store);
  try {
    CoverageInfo resource=builder.buildCoverage();
    boolean dimensionsPresent=enableDimensions(resource);
    if (checkDimensions) {
      if (!dimensionsPresent) {
        catalog.remove(store);
        throw new IllegalArgumentException("The layer '" + name + "' could not be created: no dimensions found");
      }
    }
    resource.setName(name);
    catalog.add(resource);
    LayerInfo layer=builder.buildLayer(resource);
    layer.setName(name);
    layer.setTitle(name);
    layer.setEnabled(true);
    layer.setQueryable(true);
    layer.setType(LayerInfo.Type.RASTER);
    layer.getMetadata().put(EoLayerType.KEY,type);
    catalog.add(layer);
    return layer;
  }
 catch (  RuntimeException e) {
    throw new IllegalArgumentException("The layer '" + name + "' could not be created. Failure message: "+ e.getMessage(),e);
  }
catch (  Exception e) {
    throw new IllegalArgumentException("The layer '" + name + "' could not be created. Failure message: "+ e.getMessage(),e);
  }
}
