{
  File wpsStore=null;
  try {
    GeoServerResourceLoader loader=GeoServerExtensions.bean(GeoServerResourceLoader.class);
    Resource wps=loader.get("temp/wps");
    wpsStore=wps.dir();
  }
 catch (  Exception e) {
    throw new ServiceException("Could not create the temporary storage directory for WPS");
  }
  if (wpsStore == null || !wpsStore.exists()) {
    throw new ServiceException("Could not create the temporary storage directory for WPS");
  }
  return wpsStore;
}
