{
  final CoverageDimensionImpl coverageDim=new CoverageDimensionImpl();
  final String wrappedName="wrapped";
  coverageDim.setName(wrappedName);
  coverageDim.setDimensionType(SampleDimensionType.REAL_64BITS);
  final List<Double> nullValues=new ArrayList<Double>();
  final double noData1=-32768d;
  final double noData2=-32767d;
  nullValues.add(noData1);
  nullValues.add(noData2);
  coverageDim.setNullValues(nullValues);
  GridSampleDimension sampleDim=new GridSampleDimension("original",new Category[]{new Category(Vocabulary.formatInternational(VocabularyKeys.NODATA),new Color(0,0,0,0),0)},null);
  GridSampleDimension wrappedDim=new WrappedSampleDimension(sampleDim,coverageDim);
  double[] noData=wrappedDim.getNoDataValues();
  assertEquals(2,noData.length);
  assertEquals(noData1,noData[0],DELTA);
  assertEquals(noData2,noData[1],DELTA);
  List<Category> categories=wrappedDim.getCategories();
  Category category=categories.get(0);
  assertTrue(category.getName().equals(Category.NODATA.getName()));
  assertNull(category.getSampleToGeophysics());
  assertEquals(category.geophysics(true).getRange().getMinimum(),Double.NaN,DELTA);
  assertEquals(category.geophysics(true).getRange().getMaximum(),Double.NaN,DELTA);
  sampleDim=new GridSampleDimension("original",new Category[]{new Category(Vocabulary.formatInternational(VocabularyKeys.NODATA),new Color[]{new Color(0,0,0,0)},NumberRange.create(-9999,-9999),NumberRange.create(-9999,-9999))},null);
  wrappedDim=new WrappedSampleDimension(sampleDim,coverageDim);
  noData=wrappedDim.getNoDataValues();
  assertEquals(2,noData.length);
  assertEquals(noData1,noData[0],DELTA);
  assertEquals(noData2,noData[1],DELTA);
  categories=wrappedDim.getCategories();
  category=categories.get(0);
  assertTrue(category.getName().equals(Category.NODATA.getName()));
  assertNotNull(category.getSampleToGeophysics());
  assertEquals(category.geophysics(true).getRange().getMinimum(),noData1,DELTA);
  assertEquals(category.geophysics(true).getRange().getMaximum(),noData1,DELTA);
}
