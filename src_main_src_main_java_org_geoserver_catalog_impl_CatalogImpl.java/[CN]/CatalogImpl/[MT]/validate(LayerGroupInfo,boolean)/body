{
  if (isNull(layerGroup.getName())) {
    throw new NullPointerException("Layer group name must not be null");
  }
  LayerGroupInfo existing=getLayerGroupByName(layerGroup.getName());
  if (existing != null && !existing.getId().equals(layerGroup.getId())) {
    throw new IllegalArgumentException("Layer group named '" + layerGroup.getName() + "' already exists.");
  }
  if (layerGroup.getLayers() == null || layerGroup.getLayers().isEmpty()) {
    throw new IllegalArgumentException("Layer group must not be empty");
  }
  if (layerGroup.getStyles() != null && !layerGroup.getStyles().isEmpty() && !(layerGroup.getStyles().size() == layerGroup.getLayers().size())) {
    throw new IllegalArgumentException("Layer group has different number of styles than layers");
  }
  return postValidate(layerGroup,isNew);
}
