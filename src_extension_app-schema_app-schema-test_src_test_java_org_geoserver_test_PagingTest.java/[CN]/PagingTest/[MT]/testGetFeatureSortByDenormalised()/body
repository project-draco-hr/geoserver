{
  Document doc=getAsDOM("wfs?request=GetFeature&version=1.1.0&typename=gsml:GeologicUnit&outputFormat=gml32&maxFeatures=2&startIndex=0&sortBy=gml:name");
  LOGGER.info("WFS GetFeature&typename=gsml:GeologicUnit response:\n" + prettyString(doc));
  assertXpathCount(2,"//gsml:GeologicUnit",doc);
  Node firstNode=doc.getElementsByTagName("gsml:GeologicUnit").item(0);
  assertEquals("gu.25682",firstNode.getAttributes().getNamedItem("gml:id").getNodeValue());
  assertXpathEvaluatesTo("Olivine basalt","//gsml:GeologicUnit[@gml:id='gu.25682']/gml:description",doc);
  assertXpathCount(2,"//gsml:GeologicUnit[@gml:id='gu.25682']/gml:name",doc);
  assertXpathEvaluatesTo("New Group","//gsml:GeologicUnit[@gml:id='gu.25682']/gml:name[@codeSpace='urn:ietf:rfc:2141']",doc);
  List<String> names=new ArrayList<String>();
  names.add("New Group");
  names.add("-Xy");
  String name=evaluate("//gsml:GeologicUnit[@gml:id='gu.25682']/gml:name[1]",doc);
  assertTrue(names.contains(name));
  names.remove(name);
  name=evaluate("//gsml:GeologicUnit[@gml:id='gu.25682']/gml:name[2]",doc);
  assertTrue(names.contains(name));
  names.remove(name);
  assertTrue(names.isEmpty());
  assertXpathEvaluatesTo("instance","//gsml:GeologicUnit[@gml:id='gu.25682']/gsml:purpose",doc);
  assertXpathEvaluatesTo("urn:ogc:def:nil:OGC::unknown","//gsml:GeologicUnit[@gml:id='gu.25682']/gsml:geologicUnitType/@xlink:href",doc);
  assertXpathCount(1,"//gsml:GeologicUnit[@gml:id='gu.25682']/gsml:occurrence",doc);
  assertXpathEvaluatesTo("","//gsml:GeologicUnit[@gml:id='gu.25682']/gsml:occurrence",doc);
  assertXpathEvaluatesTo("urn:cgi:feature:MappedFeature:mf4","//gsml:GeologicUnit[@gml:id='gu.25682']/gsml:occurrence/@xlink:href",doc);
  Node secondNode=doc.getElementsByTagName("gsml:GeologicUnit").item(1);
  assertEquals("gu.25699",secondNode.getAttributes().getNamedItem("gml:id").getNodeValue());
  assertXpathEvaluatesTo("Olivine basalt, tuff, microgabbro, minor sedimentary rocks","//gsml:GeologicUnit[@gml:id='gu.25699']/gml:description",doc);
  assertXpathCount(2,"//gsml:GeologicUnit[@gml:id='gu.25699']/gml:name",doc);
  assertXpathEvaluatesTo("Yaugher Volcanic Group","//gsml:GeologicUnit[@gml:id='gu.25699']/gml:name[@codeSpace='urn:ietf:rfc:2141']",doc);
  names.add("Yaugher Volcanic Group");
  names.add("-Py");
  name=evaluate("//gsml:GeologicUnit[@gml:id='gu.25699']/gml:name[1]",doc);
  assertTrue(names.contains(name));
  names.remove(name);
  name=evaluate("//gsml:GeologicUnit[@gml:id='gu.25699']/gml:name[2]",doc);
  assertTrue(names.contains(name));
  names.remove(name);
  assertTrue(names.isEmpty());
  assertXpathEvaluatesTo("instance","//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:purpose",doc);
  assertXpathEvaluatesTo("urn:ogc:def:nil:OGC::unknown","//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:geologicUnitType/@xlink:href",doc);
  assertXpathCount(1,"//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:occurrence",doc);
  assertXpathEvaluatesTo("","//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:occurrence",doc);
  assertXpathEvaluatesTo("urn:cgi:feature:MappedFeature:mf1","//gsml:GeologicUnit[@gml:id='gu.25699']/gsml:occurrence/@xlink:href",doc);
}
