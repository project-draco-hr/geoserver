{
  Version version=WMS.version(request.getVersion(),true);
  if (!WMS.VERSION_1_1_1.equals(version) || !isTiled(request)) {
    return;
  }
  final String namespacePrefixFilter=request.getNamespace();
  Iterable<? extends TileLayer> tileLayers;
  tileLayers=gwc.getTileLayersByNamespacePrefix(namespacePrefixFilter);
  for (  TileLayer layer : tileLayers) {
    for (    String gridSetId : layer.getGridSubsets()) {
      GridSubset grid=layer.getGridSubset(gridSetId);
      for (      MimeType mime : layer.getMimeTypes()) {
        vendorSpecificTileset(tx,layer,grid,mime.getFormat());
      }
    }
  }
}
