{
  Version version=WMS.version(request.getVersion(),true);
  if (!WMS.VERSION_1_1_1.equals(version) || !isTiled(request)) {
    return;
  }
  String namespacePrefixFilter=request.getNamespace();
  Iterable<TileLayer> tileLayers=gwc.getTileLayersByNamespacePrefix(namespacePrefixFilter);
  for (  TileLayer layer : tileLayers) {
    Set<String> layerGrids=layer.getGridSubsets();
    for (    String gridId : layerGrids) {
      GridSubset grid=layer.getGridSubset(gridId);
      for (      MimeType mime : layer.getMimeTypes()) {
        vendorSpecificTileset(tx,layer,grid,mime.getFormat());
      }
    }
  }
}
