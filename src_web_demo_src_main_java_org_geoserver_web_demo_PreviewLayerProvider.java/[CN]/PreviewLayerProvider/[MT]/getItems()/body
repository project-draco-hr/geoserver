{
  List<PreviewLayer> result=new ArrayList<PreviewLayer>();
  List<LayerInfo> layers=getCatalog().getLayers();
  for (  LayerInfo layer : layers) {
    if (layer.enabled() && layer.isAdvertised()) {
      result.add(new PreviewLayer(layer));
    }
  }
  final List<LayerGroupInfo> layerGroups=getCatalog().getLayerGroups();
  for (  LayerGroupInfo group : layerGroups) {
    if (!LayerGroupInfo.Mode.CONTAINER.equals(group.getMode())) {
      boolean enabled=true;
      layers=group.layers();
      for (      LayerInfo layer : layers) {
        enabled&=layer.enabled();
      }
      if (enabled && layers.size() > 0)       result.add(new PreviewLayer(group));
    }
  }
  return result;
}
