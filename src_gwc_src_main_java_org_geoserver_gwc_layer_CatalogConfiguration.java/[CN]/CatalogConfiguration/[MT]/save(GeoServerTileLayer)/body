{
  log.info("Saving " + layer.getName());
  MetadataMap metadata;
  LayerInfo layerInfo=layer.getLayerInfo();
  LayerGroupInfo layerGroupInfo=layer.getLayerGroupInfo();
  if (layerInfo == null) {
    metadata=layerGroupInfo.getMetadata();
  }
 else {
    metadata=layerInfo.getMetadata();
  }
  GeoServerTileLayerInfo tileLayerInfo=layer.getInfo();
  tileLayerInfo.saveTo(metadata);
  if (layerInfo != null) {
    catalog.save(layerInfo);
  }
 else {
    catalog.save(layerGroupInfo);
  }
}
