{
  List features=new ArrayList();
  for (int i=0; i < mapContext.getLayerCount(); i++) {
    MapLayer l=mapContext.getLayer(i);
    if (l.toLayer() instanceof FeatureLayer) {
      FeatureSource source=mapContext.getLayer(i).getFeatureSource();
      features.add(source.getFeatures(l.getQuery()));
    }
  }
  if (features.isEmpty()) {
    throw new IllegalArgumentException("No feature data in map context");
  }
  PyObject obj=pyObject();
  obj.__call__(Py.javas2pys(features,output));
  output.flush();
}
