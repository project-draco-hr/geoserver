{
  final Double opacity=properties.getOpacity();
  final Double scale=properties.getScale();
  final Double heading=properties.getHeading();
  start("IconStyle");
  if (opacity != null) {
    String mask=String.format("#%02xffffff",Math.round(opacity * 255));
    element("colorMask",mask);
  }
  if (scale != null) {
    element("scale",String.valueOf(scale));
  }
  if (heading != null) {
    element("heading",String.valueOf(heading));
  }
  WorkspaceInfo ws=wms.getCatalog().getStyleByName(style.getName()).getWorkspace();
  String wsName=null;
  if (ws != null)   wsName=ws.getName();
  start("Icon");
  element("href",properties.href(mapContent.getRequest().getBaseUrl(),wsName,style.getName()));
  end("Icon");
  end("IconStyle");
}
