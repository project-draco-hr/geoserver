{
  Map<Identifier,FeatureAccessor> map=new HashMap<Identifier,FeatureAccessor>();
  @SuppressWarnings("unchecked") List<FeatureCollection<?,?>> resultsList=collection.getFeature();
  for (  FeatureCollection<?,?> fc : resultsList) {
    FeatureIterator<?> iterator=fc.features();
    try {
      while (iterator.hasNext()) {
        Feature feature=iterator.next();
        FeatureAccessor accessor=new FeatureAccessorImpl(feature);
        map.put(feature.getIdentifier(),accessor);
      }
    }
  finally {
      iterator.close();
    }
  }
  return map;
}
