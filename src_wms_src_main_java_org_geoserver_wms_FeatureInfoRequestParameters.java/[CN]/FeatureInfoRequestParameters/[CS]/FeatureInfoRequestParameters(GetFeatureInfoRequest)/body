{
  this.layers=request.getQueryLayers();
  this.filters=request.getGetMapRequest().getFilter();
  this.styles=getStyles(request,layers);
  this.x=request.getXPixel();
  this.y=request.getYPixel();
  this.buffer=request.getGetMapRequest().getBuffer();
  this.viewParams=request.getGetMapRequest().getViewParams();
  this.getMapReq=request.getGetMapRequest();
  this.requestedCRS=getMapReq.getCrs();
  this.maxFeatures=request.getFeatureCount();
  this.width=getMapReq.getWidth();
  this.height=getMapReq.getHeight();
  this.bbox=new ReferencedEnvelope(getMapReq.getBbox(),getMapReq.getCrs());
  this.scaleDenominator=RendererUtilities.calculateOGCScale(bbox,width,null);
  this.elevations=request.getGetMapRequest().getElevation();
  this.times=request.getGetMapRequest().getTime();
  this.ff=CommonFactoryFinder.getFilterFactory2(GeoTools.getDefaultHints());
  this.propertyNames=request.getPropertyNames();
}
