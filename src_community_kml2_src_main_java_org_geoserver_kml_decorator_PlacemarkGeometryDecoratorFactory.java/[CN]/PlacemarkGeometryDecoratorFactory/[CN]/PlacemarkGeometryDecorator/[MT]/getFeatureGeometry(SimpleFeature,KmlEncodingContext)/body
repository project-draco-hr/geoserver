{
  Geometry geom=(Geometry)sf.getDefaultGeometry();
  if (hasHeightTemplate) {
    try {
      String output=context.getTemplate().template(sf,"height.ftl",FeatureTemplate.class);
      final double height=Double.valueOf(output);
      if (!Double.isNaN(height) && height != 0) {
        geom.apply(new CoordinateFilter(){
          public void filter(          Coordinate c){
            c.setCoordinate(new Coordinate(c.x,c.y,height));
          }
        }
);
        geom.geometryChanged();
      }
    }
 catch (    IOException ioe) {
      LOGGER.log(Level.WARNING,"Couldn't render height template for " + sf.getID(),ioe);
    }
  }
  return geom;
}
