{
  List<Property> sortedProperties=new ArrayList<Property>(properties.size());
  for (  Property p : properties) {
    sortedProperties.add(p);
  }
  Collections.sort(sortedProperties,new Comparator<Property>(){
    @Override public int compare(    Property o1,    Property o2){
      int r=o1.getName().getLocalPart().compareTo(o2.getName().getLocalPart());
      if (r != 0) {
        return r;
      }
      String ns1=o1.getName().getNamespaceURI();
      String ns2=o2.getName().getNamespaceURI();
      if (ns1 == null) {
        return ns2 == null ? 0 : -1;
      }
      return ns1.compareTo(ns2);
    }
  }
);
  for (  Property p : sortedProperties) {
    if (p instanceof ComplexAttribute) {
      ComplexAttribute complex=(ComplexAttribute)p;
      sha1Properties(complex.getProperties());
    }
 else {
      sha1Property(p);
    }
  }
}
