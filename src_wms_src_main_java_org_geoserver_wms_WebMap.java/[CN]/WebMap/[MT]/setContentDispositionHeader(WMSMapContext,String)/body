{
  StringBuffer sb=new StringBuffer();
  for (int i=0; i < mapContext.getLayerCount(); i++) {
    MapLayer layer=mapContext.getLayer(i);
    String title=layer.getTitle();
    if (title != null && !title.equals("")) {
      sb.append(title).append("_");
    }
  }
  String value;
  if (sb.length() > 0) {
    sb.setLength(sb.length() - 1);
    value="attachment; filename=" + sb.toString() + extension;
  }
 else {
    value="attachment; filename=geoserver" + extension;
  }
  setResponseHeader("Content-Disposition",value);
}
