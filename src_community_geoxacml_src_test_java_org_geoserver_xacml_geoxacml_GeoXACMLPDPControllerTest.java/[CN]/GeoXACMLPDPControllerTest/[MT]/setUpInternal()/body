{
  super.setUpInternal();
  ProviderManager providerManager=(ProviderManager)GeoServerExtensions.bean("authenticationManager");
  List<AuthenticationProvider> list=new ArrayList<AuthenticationProvider>();
  list.add(new TestingAuthenticationProvider());
  providerManager.setProviders(list);
  Authentication admin=new TestingAuthenticationToken("admin","geoserver",new GrantedAuthority[]{new XACMLRole("ROLE_ADMINISTRATOR")});
  SecurityContextHolder.getContext().setAuthentication(admin);
}
