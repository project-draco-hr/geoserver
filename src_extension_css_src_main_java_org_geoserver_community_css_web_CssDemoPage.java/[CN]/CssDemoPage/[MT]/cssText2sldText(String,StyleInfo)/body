{
  try {
    GeoServerDataDirectory datadir=new GeoServerDataDirectory(getCatalog().getResourceLoader());
    File styleDir;
    if (styleInfo == null || styleInfo.getWorkspace() == null) {
      styleDir=datadir.findStyleDir();
    }
 else {
      File ws=datadir.findOrCreateWorkspaceDir(styleInfo.getWorkspace());
      styleDir=new File(ws,"styles");
      if (!styleDir.exists()) {
        styleDir.mkdir();
      }
    }
    scala.collection.Seq<org.geoscript.geocss.Rule> rules=CssParser.parse(css).get();
    Translator translator=new Translator(scala.Option.apply(styleDir.toURI().toURL()));
    Style style=translator.css2sld(rules);
    SLDTransformer tx=new org.geotools.styling.SLDTransformer();
    tx.setIndentation(2);
    StringWriter sldChars=new java.io.StringWriter();
    tx.transform(style,sldChars);
    return sldChars.toString();
  }
 catch (  Exception e) {
    throw new WicketRuntimeException("Error while parsing stylesheet [" + css + "] : "+ e);
  }
}
