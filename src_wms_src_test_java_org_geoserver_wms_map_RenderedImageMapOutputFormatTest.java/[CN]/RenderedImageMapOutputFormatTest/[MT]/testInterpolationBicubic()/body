{
  final Catalog catalog=getCatalog();
  CoverageInfo coverageInfo=catalog.getCoverageByName(MockData.TASMANIA_DEM.getNamespaceURI(),MockData.TASMANIA_DEM.getLocalPart());
  Envelope env=coverageInfo.boundingBox();
  double shift=env.getWidth() / 6;
  env=new Envelope(env.getMinX() - shift,env.getMaxX() + shift,env.getMinY() - shift,env.getMaxY() + shift);
  GetMapRequest request=new GetMapRequest();
  final WMSMapContent map=new WMSMapContent();
  int w=400;
  int h=(int)Math.round((env.getHeight() * w) / env.getWidth());
  map.setMapWidth(w);
  map.setMapHeight(h);
  map.setBgColor(BG_COLOR);
  map.setTransparent(true);
  map.setRequest(request);
  addRasterToMap(map,MockData.TASMANIA_DEM);
  map.getViewport().setBounds(new ReferencedEnvelope(env,DefaultGeographicCRS.WGS84));
  request.setInterpolations(Arrays.asList(Interpolation.getInstance(Interpolation.INTERP_BICUBIC)));
  request.setFormat(getMapFormat());
  RenderedImageMap imageMap=this.rasterMapProducer.produceMap(map);
  RenderedOp op=(RenderedOp)imageMap.getImage();
  BufferedImage image=op.getAsBufferedImage();
  imageMap.dispose();
  assertNotBlank("testInterpolation",image);
  assertTrue(getPixelColor(image,200,200).getRGB() < Color.DARK_GRAY.getRGB());
  assertPixelIsTransparent(image,50,650);
  assertTrue(getPixelColor(image,200,200).getRGB() < Color.WHITE.getRGB());
}
