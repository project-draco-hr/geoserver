{
  final WMSInfo service=getGeoServer().getService(WMSInfo.class);
  service.setTitle("test title");
  service.setAbstract("test abstract");
  service.setAccessConstraints("test accessConstraints");
  service.setFees("test fees");
  service.getKeywords().clear();
  service.getKeywords().add("test keyword 1");
  service.getKeywords().add("test keyword 2");
  service.setMaintainer("test maintainer");
  service.setOnlineResource("http://example.com/geoserver");
  GeoServerInfo global=getGeoServer().getGlobal();
  ContactInfo contact=global.getContact();
  contact.setAddress("__address");
  contact.setAddressCity("__city");
  contact.setAddressCountry("__country");
  contact.setAddressPostalCode("__ZIP");
  contact.setAddressState("__state");
  contact.setAddressType("__type");
  contact.setContactEmail("e@mail");
  contact.setContactOrganization("__org");
  contact.setContactFacsimile("__fax");
  contact.setContactPerson("__me");
  contact.setContactPosition("__position");
  contact.setContactVoice("__phone");
  getGeoServer().save(global);
  getGeoServer().save(service);
  Document doc=getAsDOM("wms?service=WMS&request=getCapabilities&version=1.3.0",true);
  String base="wms:WMS_Capabilities/wms:Service/";
  assertXpathEvaluatesTo("WMS",base + "wms:Name",doc);
  assertXpathEvaluatesTo("test title",base + "wms:Title",doc);
  assertXpathEvaluatesTo("test abstract",base + "wms:Abstract",doc);
  assertXpathEvaluatesTo("test keyword 1",base + "wms:KeywordList/wms:Keyword[1]",doc);
  assertXpathEvaluatesTo("test keyword 2",base + "wms:KeywordList/wms:Keyword[2]",doc);
  assertXpathEvaluatesTo("http://example.com/geoserver",base + "wms:OnlineResource/@xlink:href",doc);
  String cinfo=base + "wms:ContactInformation/";
  assertXpathEvaluatesTo("__me",cinfo + "wms:ContactPersonPrimary/wms:ContactPerson",doc);
  assertXpathEvaluatesTo("__org",cinfo + "wms:ContactPersonPrimary/wms:ContactOrganization",doc);
  assertXpathEvaluatesTo("__position",cinfo + "wms:ContactPosition",doc);
  assertXpathEvaluatesTo("__type",cinfo + "wms:ContactAddress/wms:AddressType",doc);
  assertXpathEvaluatesTo("__address",cinfo + "wms:ContactAddress/wms:Address",doc);
  assertXpathEvaluatesTo("__city",cinfo + "wms:ContactAddress/wms:City",doc);
  assertXpathEvaluatesTo("__state",cinfo + "wms:ContactAddress/wms:StateOrProvince",doc);
  assertXpathEvaluatesTo("__ZIP",cinfo + "wms:ContactAddress/wms:PostCode",doc);
  assertXpathEvaluatesTo("__country",cinfo + "wms:ContactAddress/wms:Country",doc);
  assertXpathEvaluatesTo("__phone",cinfo + "wms:ContactVoiceTelephone",doc);
  assertXpathEvaluatesTo("__fax",cinfo + "wms:ContactFacsimileTelephone",doc);
  assertXpathEvaluatesTo("e@mail",cinfo + "wms:ContactElectronicMailAddress",doc);
}
