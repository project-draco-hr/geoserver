{
  Set<LayerInfo> layersAlreadyProcessed=new HashSet<LayerInfo>();
  if (layerGroups == null) {
    return layersAlreadyProcessed;
  }
  List<LayerGroupInfo> topLevelGroups=filterNestedGroups(layerGroups);
  for (  LayerGroupInfo group : topLevelGroups) {
    handleLayerGroup(group,layersAlreadyProcessed);
  }
  return layersAlreadyProcessed;
}
