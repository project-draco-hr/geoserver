{
  FeatureTypeInfo featureTypeInfo=catalog.getFeatureTypeByName(typeName.getNamespaceURI(),typeName.getLocalPart());
  String name="";
  if (bbox instanceof ReferencedEnvelope3D) {
    return filterFactory.bbox(name,(ReferencedEnvelope3D)bbox);
  }
  String epsgCode=null;
  if (bbox instanceof ReferencedEnvelope) {
    CoordinateReferenceSystem crs=((ReferencedEnvelope)bbox).getCoordinateReferenceSystem();
    if (crs != null) {
      epsgCode=GML2EncodingUtils.crs(crs);
    }
  }
  return filterFactory.bbox(name,bbox.getMinX(),bbox.getMinY(),bbox.getMaxX(),bbox.getMaxY(),epsgCode);
}
