{
  SecuredFeatureCollection ro=new SecuredFeatureCollection(fc,WrapperPolicy.readOnlyChallenge(null));
  try {
    ro.add(feature);
    fail("Should have failed with a spring security exception");
  }
 catch (  Exception e) {
    if (ReadOnlyDataStoreTest.isSpringSecurityException(e) == false)     fail("Should have failed with a security exception");
  }
  try {
    ro.addAll(new ArrayList());
    fail("Should have failed with a spring security exception");
  }
 catch (  Exception e) {
    if (ReadOnlyDataStoreTest.isSpringSecurityException(e) == false)     fail("Should have failed with a security exception");
  }
  try {
    ro.clear();
    fail("Should have failed with a spring security exception");
  }
 catch (  Exception e) {
    if (ReadOnlyDataStoreTest.isSpringSecurityException(e) == false)     fail("Should have failed with a security exception");
  }
  try {
    ro.remove(feature);
    fail("Should have failed with a spring security exception");
  }
 catch (  Exception e) {
    if (ReadOnlyDataStoreTest.isSpringSecurityException(e) == false)     fail("Should have failed with a security exception");
  }
  try {
    ro.removeAll(new ArrayList());
    fail("Should have failed with a spring security exception");
  }
 catch (  Exception e) {
    if (ReadOnlyDataStoreTest.isSpringSecurityException(e) == false)     fail("Should have failed with a security exception");
  }
  try {
    ro.retainAll(new ArrayList());
    fail("Should have failed with a spring security exception");
  }
 catch (  UnsupportedOperationException e) {
  }
catch (  Exception e) {
    if (ReadOnlyDataStoreTest.isSpringSecurityException(e) == false)     fail("Should have failed with a security exception");
  }
  Iterator roit=ro.iterator();
  roit.hasNext();
  roit.next();
  try {
    roit.remove();
    fail("Should have failed with a spring security exception");
  }
 catch (  Exception e) {
    if (ReadOnlyDataStoreTest.isSpringSecurityException(e) == false)     fail("Should have failed with a security exception");
  }
  SecuredFeatureCollection sorted=(SecuredFeatureCollection)ro.sort(sort);
  assertEquals(ro.policy,sorted.policy);
  SecuredFeatureCollection sub=(SecuredFeatureCollection)ro.subCollection(Filter.INCLUDE);
  assertEquals(ro.policy,sorted.policy);
}
