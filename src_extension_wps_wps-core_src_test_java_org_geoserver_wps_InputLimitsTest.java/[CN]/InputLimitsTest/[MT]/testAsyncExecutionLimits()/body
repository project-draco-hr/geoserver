{
  WPSInfo wps=getGeoServer().getService(WPSInfo.class);
  wps.setMaxAsynchronousExecutionTime(2);
  getGeoServer().save(wps);
  String request="wps?service=WPS&version=1.0.0&request=Execute&Identifier=gs:Monkey&storeExecuteResponse=true&DataInputs=" + urlEncode("id=x2");
  Document dom=getAsDOM(request);
  assertXpathExists("//wps:ProcessAccepted",dom);
  XpathEngine xpath=XMLUnit.newXpathEngine();
  String fullStatusLocation=xpath.evaluate("//wps:ExecuteResponse/@statusLocation",dom);
  String statusLocation=fullStatusLocation.substring(fullStatusLocation.indexOf('?') - 3);
  dom=waitForProcessEnd(statusLocation,60,new Callable<Void>(){
    @Override public Void call() throws Exception {
      MonkeyProcess.progress("x2",50f,true);
      Thread.sleep(100);
      return null;
    }
  }
);
  XMLAssert.assertXpathExists("//wps:Status/wps:ProcessFailed",dom);
  String message=xpath.evaluate("//wps:Status/wps:ProcessFailed/ows:ExceptionReport/ows:Exception/ows:ExceptionText",dom);
  assertTrue(message.contains("went beyond the configured limits of 2 seconds"));
}
