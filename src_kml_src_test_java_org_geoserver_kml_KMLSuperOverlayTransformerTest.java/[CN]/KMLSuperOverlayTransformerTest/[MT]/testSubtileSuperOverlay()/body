{
  KMLSuperOverlayTransformer transformer=new KMLSuperOverlayTransformer(getWMS(),mapContent);
  transformer.setIndentation(2);
  mapContent.getViewport().setBounds(new ReferencedEnvelope(0,180,-90,90,DefaultGeographicCRS.WGS84));
  ByteArrayOutputStream output=new ByteArrayOutputStream();
  transformer.transform(Layer,output);
  DocumentBuilder docBuilder=DocumentBuilderFactory.newInstance().newDocumentBuilder();
  Document document=docBuilder.parse(new ByteArrayInputStream(output.toByteArray()));
  print(document);
  assertEquals("kml",document.getDocumentElement().getNodeName());
  assertEquals(2,document.getElementsByTagName("Region").getLength());
  assertEquals(1,document.getElementsByTagName("NetworkLink").getLength());
  assertEquals(0,document.getElementsByTagName("GroundOverlay").getLength());
}
