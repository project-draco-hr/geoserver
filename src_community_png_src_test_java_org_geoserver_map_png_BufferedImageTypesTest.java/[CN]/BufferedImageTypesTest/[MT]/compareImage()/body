{
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  new PNGJMapResponse(null).writePNG(image,bos,4,FilterType.FILTER_NONE);
  ByteArrayInputStream bis=new ByteArrayInputStream(bos.toByteArray());
  BufferedImage readBack=ImageIO.read(bis);
  boolean success=false;
  try {
    ImageAssert.assertImagesEqual(image,readBack);
    success=true;
  }
  finally {
    if (!success) {
      ImageIO.write(image,"PNG",new File("./target/" + name + "_expected.png"));
      ImageIO.write(readBack,"PNG",new File("./target/" + name + "_actual.png"));
    }
  }
}
