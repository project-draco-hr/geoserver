{
  VersionedDescribeResults results=(VersionedDescribeResults)value;
  DescribeFeatureTypeType req=(DescribeFeatureTypeType)describeFeatureType.getParameters()[0];
  FeatureTypeSchemaBuilder builder=null;
  if (results.isVersioned()) {
    builder=new VersionedSchemaBuilder(wfs.getGeoServer(),configuration);
  }
 else {
    builder=new FeatureTypeSchemaBuilder.GML3(wfs.getGeoServer());
  }
  XSDSchema schema=builder.build(results.getFeatureTypeInfo(),req.getBaseUrl());
  schema.updateElement();
  XSDResourceImpl.serialize(output,schema.getElement());
}
