{
  Boolean strict=(Boolean)kvp.get("strict");
  if (strict == null) {
    strict=Boolean.FALSE;
  }
  if (wfs.isCiteCompliant()) {
    strict=Boolean.TRUE;
  }
  parser.setValidating(strict.booleanValue());
  parser.getURIHandlers().add(0,new WFSURIHandler(geoServer));
  Catalog catalog=geoServer.getCatalog();
  List<NamespaceInfo> namespaces=catalog.getNamespaces();
  for (  NamespaceInfo ns : namespaces) {
    if (ns.equals(catalog.getDefaultNamespace()))     continue;
    parser.getNamespaces().declarePrefix(ns.getPrefix(),ns.getURI());
  }
}
