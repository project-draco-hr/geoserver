{
  AjaxSubmitLink link=new AjaxSubmitLink("chooser"){
    @Override public boolean getDefaultFormProcessing(){
      return false;
    }
    @Override public void onSubmit(    AjaxRequestTarget target,    Form form){
      File file=null;
      textField.processInput();
      String input=(String)textField.getConvertedInput();
      if (input != null && !input.equals("")) {
        file=new File(input);
      }
      GeoServerFileChooser chooser=new GeoServerFileChooser(dialog.getContentId(),new Model(file)){
        protected void fileClicked(        File file,        AjaxRequestTarget target){
          textField.clearInput();
          textField.setModelObject(file.getAbsolutePath());
          target.addComponent(textField);
          dialog.close(target);
        }
      }
;
      chooser.setFileTableHeight(null);
      chooser.setFilter(fileFilter);
      dialog.setContent(chooser);
      dialog.setTitle(windowTitle);
      dialog.show(target);
    }
  }
;
  return link;
}
