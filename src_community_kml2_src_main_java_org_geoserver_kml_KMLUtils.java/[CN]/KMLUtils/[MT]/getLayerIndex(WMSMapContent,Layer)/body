{
  List<Layer> layers=mapContent.layers();
  for (int i=0; i < layers.size(); i++) {
    if (layers.get(i) == layer) {
      return i;
    }
  }
  throw new ServiceException("Unexpected, could not find layer " + layer + " in the map context");
}
