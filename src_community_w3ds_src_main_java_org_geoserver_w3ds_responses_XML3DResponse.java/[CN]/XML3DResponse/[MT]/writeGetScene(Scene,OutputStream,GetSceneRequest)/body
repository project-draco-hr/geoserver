{
  XML3DBuilder xml3dBuilder=new XML3DBuilder(getSceneRequest.getBbox(),outputStream,getSceneRequest.getFormat());
  if (getSceneRequest.getKpvPrs().containsKey("LOD")) {
    int LOD=Integer.parseInt(getSceneRequest.getKpvPrs().get("LOD"));
    if (LOGGER.isLoggable(Level.FINE)) {
      LOGGER.fine("LOD Request with LOD value: " + LOD);
    }
    xml3dBuilder.setLOD(LOD);
  }
  for (  W3DSLayer layer : scene.getLayers()) {
    xml3dBuilder.addW3DSLayer(layer);
  }
  xml3dBuilder.writeOutput();
  xml3dBuilder.close();
}
