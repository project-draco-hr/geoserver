{
  PythonWebMap map=(PythonWebMap)value;
  PythonFormatAdapter adapter=map.getAdapter();
  try {
    if (adapter instanceof PythonVectorFormatAdapter) {
      ((PythonVectorFormatAdapter)adapter).write(map.getMapContext(),output);
    }
 else     if (adapter instanceof PythonMapFormatAdapter) {
      ((PythonMapFormatAdapter)adapter).write(map.getMapContext(),output);
    }
 else {
      throw new IllegalStateException();
    }
  }
 catch (  Exception e) {
    throw new ServiceException(e);
  }
}
