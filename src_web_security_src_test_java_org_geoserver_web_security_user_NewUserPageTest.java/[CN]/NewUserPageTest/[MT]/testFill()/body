{
  Locale.setDefault(Locale.ENGLISH);
  tester.assertComponent("userForm:roles:roles:recorder",Recorder.class);
  FormTester form=tester.newFormTester("userForm");
  form.setValue("username","user");
  form.setValue("password","pwd");
  form.setValue("confirmPassword","pwd");
  form.setValue("roles:roles:recorder",dao.getRoles().get(0));
  form.submit("save");
  tester.assertErrorMessages(new String[0]);
  tester.assertRenderedPage(UserPage.class);
  dao.reload();
  UserDetails user=dao.loadUserByUsername("user");
  assertEquals("pwd",user.getPassword());
  assertEquals(1,user.getAuthorities().size());
}
