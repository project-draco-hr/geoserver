{
  List<FeatureTypeStyle> featureTypeStyles=style.featureTypeStyles();
  if (featureTypeStyles == null || featureTypeStyles.isEmpty()) {
    return new FeatureTypeStyle[0];
  }
  ArrayList<FeatureTypeStyle> filtered=new ArrayList<FeatureTypeStyle>(featureTypeStyles.size());
  for (  FeatureTypeStyle fts : featureTypeStyles) {
    String ftName=fts.getFeatureTypeName();
    if (fts.featureTypeNames().isEmpty() || ((ftype.getName().getLocalPart() != null) && (ftype.getName().getLocalPart().equalsIgnoreCase(ftName) || FeatureTypes.isDecendedFrom(ftype,null,ftName)))) {
      filtered.add(fts);
    }
  }
  return (FeatureTypeStyle[])filtered.toArray(new FeatureTypeStyle[filtered.size()]);
}
