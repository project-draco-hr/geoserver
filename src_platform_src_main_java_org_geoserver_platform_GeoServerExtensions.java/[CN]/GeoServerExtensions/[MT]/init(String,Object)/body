{
  if (context != null) {
    if (context.containsBean(name)) {
      Object conflict=context.getBean(name);
      if (bean != conflict) {
        throw new IllegalStateException("ApplicationContext " + name + " already contains "+ conflict);
      }
    }
  }
 else {
    isSpringContext=false;
  }
  if (name == null || bean == null) {
    return;
  }
  singletonBeanCache.put(name,bean);
  Class<?> type=bean.getClass();
  extensionsCache.put(type,new String[]{name});
}
